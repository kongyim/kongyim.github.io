(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,s)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:s,blurHeight:r,blurDataURL:l,objectFit:a}){let i=s?40*s:e,n=r?40*r:t,d=i&&n?`viewBox='0 0 ${i} ${n}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${d}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${d?"none":"contain"===a?"xMidYMid":"cover"===a?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${l}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},87690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return a},imageConfigDefault:function(){return i}};for(var l in r)Object.defineProperty(s,l,{enumerable:!0,get:r[l]});let a=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return d}}),e.r(33525);let r=e.r(88143),l=e.r(87690),a=["-moz-initial","fill","none","scale-down",void 0];function i(e){return void 0!==e.default}function n(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function d({src:e,sizes:t,unoptimized:s=!1,priority:d=!1,preload:o=!1,loading:c,className:u,quality:m,width:x,height:h,fill:p=!1,style:b,overrideSrc:f,onLoad:g,onLoadingComplete:w,placeholder:v="empty",blurDataURL:j,fetchPriority:y,decoding:N="async",layout:k,objectFit:S,objectPosition:C,lazyBoundary:$,lazyRoot:E,...P},_){var R;let M,O,I,{imgConf:F,showAltText:A,blurComplete:T,defaultLoader:z}=_,D=F||l.imageConfigDefault;if("allSizes"in D)M=D;else{let e=[...D.deviceSizes,...D.imageSizes].sort((e,t)=>e-t),t=D.deviceSizes.sort((e,t)=>e-t),s=D.qualities?.sort((e,t)=>e-t);M={...D,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===z)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=P.loader||z;delete P.loader,delete P.srcSet;let H="__next_img_default"in B;if(H){if("custom"===M.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:s,...r}=t;return e(r)}}if(k){"fill"===k&&(p=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];e&&(b={...b,...e});let s={responsive:"100vw",fill:"100vw"}[k];s&&!t&&(t=s)}let L="",q=n(x),U=n(h);if((R=e)&&"object"==typeof R&&(i(R)||void 0!==R.src)){let t=i(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(O=t.blurWidth,I=t.blurHeight,j=j||t.blurDataURL,L=t.src,!p)if(q||U){if(q&&!U){let e=q/t.width;U=Math.round(t.height*e)}else if(!q&&U){let e=U/t.height;q=Math.round(t.width*e)}}else q=t.width,U=t.height}let V=!d&&!o&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:L)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,V=!1),M.unoptimized&&(s=!0),H&&!M.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let Y=n(m),J=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:S,objectPosition:C}:{},A?{}:{color:"transparent"},b),W=T||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,r.getImageBlurSvg)({widthInt:q,heightInt:U,blurWidth:O,blurHeight:I,blurDataURL:j||"",objectFit:J.objectFit})}")`:`url("${v}")`,K=a.includes(J.objectFit)?"fill"===J.objectFit?"100% 100%":"cover":J.objectFit,G=W?{backgroundSize:K,backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},X=function({config:e,src:t,unoptimized:s,width:r,quality:l,sizes:a,loader:i}){if(s)return{src:t,srcSet:void 0,sizes:void 0};let{widths:n,kind:d}=function({deviceSizes:e,allSizes:t},s,r){if(r){let s=/(^|\s)(1?\d?\d)vw/g,l=[];for(let e;e=s.exec(r);)l.push(parseInt(e[2]));if(l.length){let s=.01*Math.min(...l);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,r,a),o=n.length-1;return{sizes:a||"w"!==d?a:"100vw",srcSet:n.map((s,r)=>`${i({config:e,src:t,quality:l,width:s})} ${"w"===d?s:r+1}${d}`).join(", "),src:i({config:e,src:t,quality:l,width:n[o]})}}({config:M,src:e,unoptimized:s,width:q,quality:Y,sizes:t,loader:B}),Q=V?"lazy":c;return{props:{...P,loading:Q,fetchPriority:y,width:q,height:U,decoding:N,className:u,style:{...J,...G},sizes:X.sizes,srcSet:X.srcSet,src:f||X.src},meta:{unoptimized:s,preload:o||d,placeholder:v,fill:p}}}},98879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return n}});let r=e.r(71645),l="undefined"==typeof window,a=l?()=>{}:r.useLayoutEffect,i=l?()=>{}:r.useEffect;function n(e){let{headManager:t,reduceComponentsToState:s}=e;function n(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return l&&(t?.mountedInstances?.add(e.children),n()),a(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),a(()=>(t&&(t._pendingUpdate=n),()=>{t&&(t._pendingUpdate=n)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return p},defaultHead:function(){return u}};for(var l in r)Object.defineProperty(s,l,{enumerable:!0,get:r[l]});let a=e.r(55682),i=e.r(90809),n=e.r(43476),d=i._(e.r(71645)),o=a._(e.r(98879)),c=e.r(42732);function u(){return[(0,n.jsx)("meta",{charSet:"utf-8"},"charset"),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===d.default.Fragment?e.concat(d.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let x=["name","httpEquiv","charSet","itemProp"];function h(e){let t,s,r,l;return e.reduce(m,[]).reverse().concat(u().reverse()).filter((t=new Set,s=new Set,r=new Set,l={},e=>{let a=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?a=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?a=!1:s.add(e.type);break;case"meta":for(let t=0,s=x.length;t<s;t++){let s=x[t];if(e.props.hasOwnProperty(s))if("charSet"===s)r.has(s)?a=!1:r.add(s);else{let t=e.props[s],r=l[s]||new Set;("name"!==s||!i)&&r.has(t)?a=!1:(r.add(t),l[s]=r)}}}return a})).reverse().map((e,t)=>{let s=e.key||t;return d.default.cloneElement(e,{key:s})})}let p=function({children:e}){let t=(0,d.useContext)(c.HeadManagerContext);return(0,n.jsx)(o.default,{reduceComponentsToState:h,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return a}});let r=e.r(55682)._(e.r(71645)),l=e.r(87690),a=r.default.createContext(l.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,s)=>{"use strict";function r(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return a}});let r=e.r(70965);function l({config:e,src:t,width:s,quality:l}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let a=(0,r.findClosestQuality)(l,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${a}${t.startsWith("/_next/static/media/"),""}`}l.__next_img_default=!0;let a=l},18581,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return l}});let r=e.r(71645);function l(e,t){let s=(0,r.useRef)(null),l=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(s.current=a(e,r)),t&&(l.current=a(t,r))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},5500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return v}});let r=e.r(55682),l=e.r(90809),a=e.r(43476),i=l._(e.r(71645)),n=r._(e.r(74080)),d=r._(e.r(25633)),o=e.r(8927),c=e.r(87690),u=e.r(18556);e.r(33525);let m=e.r(65856),x=r._(e.r(1948)),h=e.r(18581),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function b(e,t,s,r,l,a,i){let n=e?.src;e&&e["data-loaded-src"]!==n&&(e["data-loaded-src"]=n,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&l(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,l=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>l,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{l=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function f(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let g=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:r,width:l,decoding:n,className:d,style:o,fetchPriority:c,placeholder:u,loading:m,unoptimized:x,fill:p,onLoadRef:g,onLoadingCompleteRef:w,setBlurComplete:v,setShowAltText:j,sizesInput:y,onLoad:N,onError:k,...S},C)=>{let $=(0,i.useCallback)(e=>{e&&(k&&(e.src=e.src),e.complete&&b(e,u,g,w,v,x,y))},[e,u,g,w,v,k,x,y]),E=(0,h.useMergedRef)(C,$);return(0,a.jsx)("img",{...S,...f(c),loading:m,width:l,height:r,decoding:n,"data-nimg":p?"fill":"1",className:d,style:o,sizes:s,srcSet:t,src:e,ref:E,onLoad:e=>{b(e.currentTarget,u,g,w,v,x,y)},onError:e=>{j(!0),"empty"!==u&&v(!0),k&&k(e)}})});function w({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...f(t.fetchPriority)};return e&&n.default.preload?(n.default.preload(t.src,s),null):(0,a.jsx)(d.default,{children:(0,a.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(m.RouterContext),r=(0,i.useContext)(u.ImageConfigContext),l=(0,i.useMemo)(()=>{let e=p||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),l=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:l,localPatterns:"undefined"==typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:n,onLoadingComplete:d}=e,h=(0,i.useRef)(n);(0,i.useEffect)(()=>{h.current=n},[n]);let b=(0,i.useRef)(d);(0,i.useEffect)(()=>{b.current=d},[d]);let[f,v]=(0,i.useState)(!1),[j,y]=(0,i.useState)(!1),{props:N,meta:k}=(0,o.getImgProps)(e,{defaultLoader:x.default,imgConf:l,blurComplete:f,showAltText:j});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g,{...N,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:h,onLoadingCompleteRef:b,setBlurComplete:v,setShowAltText:y,sizesInput:e.sizes,ref:t}),k.preload?(0,a.jsx)(w,{isAppRouter:!s,imgAttributes:N}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},94909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return c},getImageProps:function(){return o}};for(var l in r)Object.defineProperty(s,l,{enumerable:!0,get:r[l]});let a=e.r(55682),i=e.r(8927),n=e.r(5500),d=a._(e.r(1948));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:d.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=n.Image},57688,(e,t,s)=>{t.exports=e.r(94909)},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(57688);let l=[{label:"A",value:1,order:1},{label:"2",value:2,order:2},{label:"3",value:3,order:3},{label:"4",value:4,order:4},{label:"5",value:5,order:5},{label:"6",value:6,order:6},{label:"7",value:7,order:7},{label:"8",value:8,order:8},{label:"9",value:9,order:9},{label:"10",value:10,order:10},{label:"J",value:10,order:11},{label:"Q",value:10,order:12},{label:"K",value:10,order:13}],a=["♠","♥","♦","♣"],i={"♠":{name:"Spades",slug:"spades",color:"text-slate-200"},"♥":{name:"Hearts",slug:"hearts",color:"text-red-200"},"♦":{name:"Diamonds",slug:"diamonds",color:"text-rose-200"},"♣":{name:"Clubs",slug:"clubs",color:"text-emerald-200"}},n={"♠":0,"♥":1,"♦":2,"♣":3},d=l.flatMap(e=>a.map(t=>({rank:e.label,value:e.value,order:e.order,suit:t,id:`${e.label}${t}`})));function o(e){return`${e.rank}${e.suit}`}let c={A:"ace",J:"jack",Q:"queen",K:"king",10:"10",9:"9",8:"8",7:"7",6:"6",5:"5",4:"4",3:"3",2:"2"};function u(e,t){let s=i[e.suit].slug,r=c[e.rank]??e.rank.toLowerCase(),l=["J","Q","K"].includes(e.rank);return`./cards/${r}_of_${s}${l&&"original"===t?"2":""}.svg`}function m(e){let t,s,r=(t=[],s=[],!function r(l){s.length&&t.push([...s]);for(let t=l;t<e.length;t+=1)s.push(e[t]),r(t+1),s.pop()}(0),t),l=[];return r.forEach(e=>{15===e.reduce((e,t)=>e+t.value,0)&&e.length>=2&&l.push(`${e.map(o).join(" + ")} = 15`)}),{label:"Fifteens",points:2*l.length,detail:l.length?l.map(e=>`${e} (2 pts)`):["No combinations totaled 15."]}}function x(e){let t=e.reduce((e,t)=>(e[t.rank]=(e[t.rank]??0)+1,e),{}),s=[],r=0;return Object.entries(t).forEach(([e,t])=>{if(t>=2){let l=t*(t-1)/2,a=2===t?"Pair":`${t} of a kind`;s.push(`${a} of ${e}s → ${2*l} pts`),r+=2*l}}),s.length||s.push("No pairs."),{label:"Pairs",points:r,detail:s}}function h(e){let t=e.reduce((e,t)=>(e[t.order]=(e[t.order]??0)+1,e),{}),s=0,r=0,a=[],i=1;for(;i<=13;){if(!t[i]){i+=1;continue}let e=i,n=1;for(;t[e];)n*=t[e],e+=1;let d=e-i;if(d>=3){let e=Array.from({length:d},(e,t)=>i+t).map(e=>{let t=l.find(t=>t.order===e);return t?.label??e.toString()}).join("-"),t=d*n;d>s?(s=d,r=t,a.length=0,a.push(`Run of ${d} (${e}) \xd7${n} = ${t} pts`)):d===s&&(r+=t,a.push(`Run of ${d} (${e}) \xd7${n} = ${t} pts`))}i=e+1}return a.length||a.push("No runs (need 3+ consecutive ranks)."),{label:"Runs",points:r,detail:a}}function p(e,t){let s,r=[...e,t],l=[m(r),x(r),h(r),function(e,t){if(!e.every(t=>t.suit===e[0].suit))return{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]};let s=t.suit===e[0].suit;return{label:"Flush",points:s?5:4,detail:[s?"5-card flush (hand + starter) = 5 pts":"4-card flush (hand only) = 4 pts"]}}(e,t),{label:"His Nobs",points:+!!(s=e.find(e=>"J"===e.rank&&e.suit===t.suit)),detail:s?[`Jack of ${t.suit} in hand matches starter suit = 1 pt`]:["No matching Jack for starter suit."]}];return{total:l.reduce((e,t)=>e+t.points,0),parts:l}}function b(e,t){if(!t.length)return{average:0,best:[]};let s=t.map(t=>({card:t,score:p(e,t).total})),r=s.reduce((e,t)=>e+t.score,0),l=[...s].sort((e,t)=>t.score-e.score),a=[],i=new Set;for(let e of l){if(i.size>=3&&!i.has(e.score))break;a.push(e),i.add(e.score)}return{average:r/s.length,best:a}}function f(e){let t=new Map;return e.forEach(({card:e,score:s})=>{let r=t.get(s)??[];r.push(e),t.set(s,r)}),Array.from(t.entries()).sort((e,t)=>t[0]-e[0]).map(([e,t])=>({score:e,cards:v(t)}))}function g(e,t,s){if(!t.length)return 0;let r=0,l=0;for(let a=0;a<t.length;a+=1){let i=t[a];for(let n=a+1;n<t.length;n+=1){let d=t[n];if(s||"5"!==i.rank&&"5"!==d.rank&&i.rank!==d.rank)for(let s=0;s<t.length;s+=1)s!==a&&s!==n&&(r+=p([...e,i,d],t[s]).total,l+=1)}}return l?r/l:0}function w(e,t,s){let r,l;if(6!==e.length)return[];let a=d.filter(t=>!e.some(e=>e.id===t.id));return(r=[],l=[],!function t(s,a){if(4===a)return void r.push([...l]);for(let r=s;r<e.length;r+=1)l.push(e[r]),t(r+1,a+1),l.pop()}(0,0),r).map(r=>{let l=e.filter(e=>!r.some(t=>t.id===e.id)),{average:i,best:n}=b(r,a),d=s?g(l,a,t):0,o=a.length?Math.min(...a.map(e=>p(r,e).total)):0,c=s?t?i+d:i-d:i;return{keep:r,discards:l,handAverage:i,cribAverage:d,expectedValue:c,bestStarters:n,minHandScore:o}}).sort((e,t)=>t.expectedValue-e.expectedValue).slice(0,3)}function v(e){return[...e].sort((e,t)=>e.order!==t.order?e.order-t.order:n[e.suit]-n[t.suit])}function j({cardsBySuit:e,hand:s,starter:l,note:a,faceStyle:i,faceStyleToggle:n,selectedIds:d,handleToggleCountCard:c,handOnlyBreakdown:m,breakdown:x,slotsFilled:h,picksRef:p}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Full deck"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[d.size,"/5 selected"]})]}),n]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:a})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:a.map(e=>{let a=s.some(t=>t.id===e.id),n=l?.id===e.id,d=a||n;return(0,t.jsxs)("button",{onClick:()=>c(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${d?"border-lime-200 ring-2 ring-lime-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(e,i),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:[a&&(0,t.jsx)("span",{className:"rounded-full bg-emerald-500/90 px-2 py-0.5 text-white shadow",children:"Hand"}),n&&(0,t.jsx)("span",{className:"rounded-full bg-amber-400/90 px-2 py-0.5 text-amber-950 shadow",children:"Starter"}),!d&&(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})]})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your picks"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click a card to add it. Click again to remove. The first 4 go to your hand, then the starter."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-emerald-400/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Hand"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-amber-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-amber-400"}),"Starter"]})]})]}),(0,t.jsxs)("div",{ref:p,className:"mt-4 grid grid-cols-4 gap-1 sm:grid-cols-5",children:[Array.from({length:4}).map((e,l)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[l]&&c(s[l]),className:"rounded-xl border border-emerald-300/20 bg-emerald-500/10 px-2 py-2 text-center text-sm text-emerald-100 shadow-inner shadow-emerald-900/50 transition hover:border-emerald-200/60 hover:shadow-lg hover:shadow-emerald-900/40 disabled:cursor-default",disabled:!s[l],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:["Hand ",l+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-emerald-200/40 bg-white/90 shadow",children:s[l]?(0,t.jsx)(r.default,{src:u(s[l],i),alt:o(s[l]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-emerald-200",children:"—"})})})]},`hand-${l}`)),(0,t.jsxs)("button",{type:"button",onClick:()=>l&&c(l),className:"rounded-xl border border-amber-300/30 bg-amber-500/10 px-3 py-4 text-center text-sm text-amber-100 shadow-inner shadow-amber-900/40 transition hover:border-amber-200/60 hover:shadow-lg hover:shadow-amber-900/30 disabled:cursor-default",disabled:!l,children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-200",children:"Starter"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-amber-200/40 bg-white/90 shadow",children:l?(0,t.jsx)(r.default,{src:u(l,i),alt:o(l),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-amber-200",children:"—"})})})]})]}),a&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:a})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-lime-300/20 bg-lime-500/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Score"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Totals refresh as soon as you finish the hand."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-300",children:"Total"}),(0,t.jsx)("div",{className:"text-4xl font-black text-lime-200",children:x?x.total:"—"}),!h&&m&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-slate-200",children:["Hand only (no starter):"," ",(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.total," pts"]})]})]})]}),!h&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:m?"Pick a starter to see the full breakdown. Hand-only score shown below.":"Pick 4 hand cards and 1 starter to see the breakdown."}),x&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:x.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},e.label))}),!x&&m&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:m.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},`hand-only-${e.label}`))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200 shadow-lg shadow-black/40",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-white",children:"How scoring works"}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"• Fifteens: every unique combo totaling 15 is worth 2."}),(0,t.jsx)("li",{children:"• Pairs: each pair scores 2 (pairs of a kind stack)."}),(0,t.jsx)("li",{children:"• Runs: longest run of 3+ in the hand; duplicates multiply runs."}),(0,t.jsx)("li",{children:"• Flush: 4 hand cards same suit = 4; starter match makes 5."}),(0,t.jsx)("li",{children:"• His Nobs: Jack in hand matching the starter suit = 1."})]})]})]})]})]})}function y({cardsBySuit:e,discardPick:s,discardNote:l,discardSelectedIds:a,handleToggleDiscardCard:i,faceStyle:d,faceStyleToggle:c,isDealer:m,includeCrib:x,onDealerChange:h,onIncludeCribChange:p,discardSuggestions:b,discardLoading:g,onStarterPick:w}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Pick any 6 cards"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[a.size,"/6 selected"]})]}),c]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:s})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:s.map(e=>{let s=a.has(e.id);return(0,t.jsxs)("button",{onClick:()=>i(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${s?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(e,d),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:s?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Picked"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your six-card hand"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click to add, click again to remove. We will try every possible discard to find the best expected value."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>h(!0),className:`px-3 py-1.5 transition ${m?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>h(!1),className:`px-3 py-1.5 transition ${!m?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:x,onChange:e=>p(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:Array.from({length:6}).map((e,l)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[l]&&i(s[l]),className:"rounded-xl border border-sky-300/30 bg-sky-500/10 px-2 py-2 text-center text-sm text-sky-100 shadow-inner shadow-sky-900/40 transition hover:border-sky-200/60 hover:shadow-lg hover:shadow-sky-900/40 disabled:cursor-default",disabled:!s[l],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-sky-200",children:["Card ",l+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-sky-200/40 bg-white/90 shadow",children:s[l]?(0,t.jsx)(r.default,{src:u(s[l],d),alt:o(s[l]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-sky-200",children:"—"})})})]},`discard-${l}`))}),l&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:l})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Discard suggestions"}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["We average every possible starter from the unseen cards.",x?m?" Expected value = hand average + crib average.":" Expected value = hand average - crib average.":" Crib is ignored when computing the average."]})]}),(0,t.jsx)("div",{className:"text-xs text-slate-300",children:"Crib assumption: when you are non-dealer, you avoid throwing 5s or pairs."})]}),s.length<6&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Pick 6 cards to see the best discard lines."}),6===s.length&&(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[g&&(0,t.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best discard lines..."]})}),!g&&b.map((e,s)=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"rounded-full bg-sky-500/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-100",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-200",children:"Keep the four below, discard the two to the crib."}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Best starters highlight spikes you can hope to cut."})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:e.expectedValue.toFixed(2)}),x&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",e.handAverage.toFixed(2)," / Crib"," ",e.cribAverage.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-[1.2fr,0.8fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.keep.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard to crib"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.discards.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.handAverage.toFixed(2)," pts"]})]}),x&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for this keep:"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:f(e.bestStarters).map(({cards:s,score:r})=>{let l,a=(l=new Map,s.forEach(e=>{let t=l.get(e.rank);t?t.suits.add(e.suit):l.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(l.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>n[e]-n[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")}))).map(({rank:e,suits:t})=>{let r=[...t].sort((e,t)=>n[e]-n[t]),l=s.filter(t=>t.rank===e).sort((e,t)=>n[e.suit]-n[t.suit]||e.order-t.order)[0]??s[0];return{rank:e,suits:r,starterCard:l}});return(0,t.jsx)("div",{className:"flex flex-col gap-2 rounded-xl border border-sky-200/30 py-1 px-2 shadow-sm shadow-sky-900/30",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map(({rank:s,suits:l,starterCard:a})=>(0,t.jsx)("button",{type:"button",onClick:()=>a&&w(e.keep,a),className:"inline-flex items-center gap-2 rounded-full border border-sky-200/60 bg-sky-500/20 px-3 py-1 text-xs font-semibold text-sky-50 transition hover:-translate-y-[1px] hover:border-sky-100 hover:bg-sky-400/30 hover:shadow-sky-500/30",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:s}),(0,t.jsx)("span",{className:"flex items-center gap-0.5 text-[11px]",children:l.map(e=>(0,t.jsx)("span",{className:"rounded bg-sky-400/40 px-1 py-[1px]",children:e},`${s}-${e}`))})]})},`starter-${r}-${s}-${a.id}`))}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-lg font-bold text-sky-50",children:[r," pts"]})})]})},`starter-block-${r}-${s.map(e=>e.id).join("-")}`)})})]})]})]},e.keep.map(e=>e.id).join("-")))]})]})]})]})}function N({faceStyle:e,onChange:s}){return(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-slate-300",children:"Face style"}),(0,t.jsx)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10",children:["simple","original"].map(r=>(0,t.jsx)("button",{onClick:()=>s(r),className:`px-3 py-1 font-semibold transition ${e===r?"bg-white/20 text-white":"text-slate-200 hover:bg-white/10"}`,children:"simple"===r?"Simple":"Original"},r))})]})}var k=e.i(74080);let S="cribbage-board-state",C=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,28,29],$=["clear","classic","bar"],E=["red","green","blue","yellow","pink","purple"],P={red:{peg:"bg-red-400",text:"text-red-200",border:"border-red-400/40",button:"bg-red-500/20 hover:bg-red-500/30",historyBg:"bg-red-500/10"},green:{peg:"bg-emerald-400",text:"text-emerald-200",border:"border-emerald-400/40",button:"bg-emerald-500/20 hover:bg-emerald-500/30",historyBg:"bg-emerald-500/10"},blue:{peg:"bg-sky-400",text:"text-sky-200",border:"border-sky-400/40",button:"bg-sky-500/20 hover:bg-sky-500/30",historyBg:"bg-sky-500/10"},yellow:{peg:"bg-amber-400",text:"text-amber-200",border:"border-amber-400/40",button:"bg-amber-500/20 hover:bg-amber-500/30",historyBg:"bg-amber-500/10"},pink:{peg:"bg-pink-400",text:"text-pink-200",border:"border-pink-400/40",button:"bg-pink-500/20 hover:bg-pink-500/30",historyBg:"bg-pink-500/10"},purple:{peg:"bg-violet-400",text:"text-violet-200",border:"border-violet-400/40",button:"bg-violet-500/20 hover:bg-violet-500/30",historyBg:"bg-violet-500/10"}},_=e=>"p1"===e?"red":"p2"===e?"green":"blue",R=()=>[{id:"p1",name:"Player 1",color:_("p1"),score:0,backPegScore:-1},{id:"p2",name:"Player 2",color:_("p2"),score:0,backPegScore:-1}],M=e=>{let t=R();return 3===e?[...t,{id:"p3",name:"Player 3",color:_("p3"),score:0,backPegScore:-1}]:t},O=[-5,5],I=e=>Math.min(Math.max(e,2),98),F=e=>12+76*e/2,A=e=>6+88*e/39;function T({onRegisterReset:e}){let[r,l]=(0,s.useState)(2),[a,i]=(0,s.useState)(()=>R()),[n,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(-1),[u,m]=(0,s.useState)("clear"),[x,h]=(0,s.useState)(!0),[p,b]=(0,s.useState)(null),f=(0,s.useRef)(null),g=(0,s.useRef)(o),w=(0,s.useRef)(!1),v=(0,s.useRef)(n),j=(0,s.useRef)(a),y=(0,s.useRef)(null),N=(0,s.useRef)([]),[_,T]=(0,s.useState)(0),[z,D]=(0,s.useState)([]),B=(0,s.useRef)(new Map),[H,L]=(0,s.useState)(!1),q=(0,s.useRef)(!1),U=(0,s.useRef)(null),V=(0,s.useMemo)(()=>[-1,...Array.from({length:122},(e,t)=>t)],[]),Y=(0,s.useMemo)(()=>V.map(e=>({score:e,pos:((e,t=0)=>{if(e<=0)return{left:4,top:I(F(0)+O[e<=-1?0:1]+t)};let s=Math.min(e,121);if(s>=121){let e=A(39)+2,s=F(2)+t;return{left:I(e),top:I(s)}}let r=s-1,l=Math.floor(r/40),a=r%40,i=A(l%2==1?39-a:a),n=F(l)+t;return{left:I(i),top:I(n)}})(e)})),[V]),J=3===r?3:2,W=a.find(e=>e.score>=121)??null;(0,s.useEffect)(()=>{g.current=o},[o]),(0,s.useEffect)(()=>{v.current=n},[n]),(0,s.useEffect)(()=>{j.current=a},[a]),(0,s.useEffect)(()=>()=>{B.current.forEach(e=>window.clearTimeout(e)),B.current.clear()},[]),(0,s.useEffect)(()=>{L(!0)},[]),(0,s.useEffect)(()=>{let e=!0,t=async()=>{if("wakeLock"in navigator)try{let t=await navigator.wakeLock.request("screen");if(!e)return void await t.release();U.current=t,t.addEventListener("release",()=>{U.current===t&&(U.current=null)})}catch{}};t();let s=()=>{"visible"!==document.visibilityState||U.current||t()};return document.addEventListener("visibilitychange",s),()=>{e=!1,document.removeEventListener("visibilitychange",s),U.current?.release(),U.current=null}},[]);let K=(0,s.useCallback)((e,t)=>{let s=`${Date.now()}-${Math.random().toString(16).slice(2)}`;D(r=>[...r,{id:s,message:e,bgClass:t}]);let r=window.setTimeout(()=>{D(e=>e.filter(e=>e.id!==s)),B.current.delete(s)},2400);B.current.set(s,r)},[]),G=(0,s.useCallback)((e,t,s)=>{let r=new Map;s.forEach(e=>{r.set(e.id,{...e,score:0,backPegScore:-1})});for(let s=0;s<=t;s+=1){let t=e[s];if(!t)continue;let l=r.get(t.playerId);l&&(l.backPegScore=t.oldScore,l.score=t.newScore)}return Array.from(r.values())},[]),X=(0,s.useCallback)((e,t)=>{if(t<=0)return;let s=j.current;if(s.find(e=>e.score>=121))return;let r=s.find(t=>t.id===e);if(!r)return;let l=Math.min(121,r.score+t),a=s.some(t=>t.id!==e&&121===t.score);121===l&&a&&(l=120);let n={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,playerId:e,playerName:r.name,scoreToAdd:t,oldScore:r.score,oldBackPegScore:r.backPegScore,newScore:l,timestamp:Date.now()};y.current="add";let o=P[r.color];K(`${r.name} +${t}`,o.historyBg),d(e=>[...e.slice(0,g.current+1),n]),c(e=>{let t=e+1;return g.current=t,t});let u=s.map(t=>t.id===e?{...t,score:l,backPegScore:t.score}:t);j.current=u,i(u)},[]),Q=(0,s.useCallback)(()=>{if("remove"===y.current&&N.current.length>0){let e=N.current.pop();if(!e)return;let t=[...v.current],s=Math.min(Math.max(e.index,0),t.length);t.splice(s,0,e.entry),v.current=t,d(t),g.current=e.prevIndex,c(e.prevIndex);let r=G(t,e.prevIndex,j.current);j.current=r,i(r),T(N.current.length),y.current=null;return}let e=g.current;if(e<0)return;let t=v.current[e];if(!t)return;i(e=>e.map(e=>e.id===t.playerId?{...e,score:t.oldScore,backPegScore:t.oldBackPegScore}:e));let s=e-1;g.current=s,c(s)},[]),Z=(0,s.useCallback)(()=>{let e=g.current+1,t=v.current[e];t&&(i(e=>e.map(e=>e.id===t.playerId?{...e,score:t.newScore,backPegScore:t.oldScore}:e)),g.current=e,c(e))},[]),ee=(0,s.useCallback)(e=>{let t=e??J,s=((e=2)=>({players:M(e),history:[],currentIndex:-1,boardSkin:"clear",playerCount:e}))(t);l(t),i(s.players),d(s.history),c(s.currentIndex),m(s.boardSkin),N.current=[],T(0);try{localStorage.removeItem(S)}catch{}},[J]),et=(0,s.useCallback)((e,t)=>{i(s=>s.some(s=>s.id!==e&&s.color===t)?s:s.map(s=>s.id===e?{...s,color:t}:s))},[]),es=(0,s.useCallback)((e,t)=>{i(s=>s.map(s=>s.id===e?{...s,name:t}:s)),d(s=>s.map(s=>s.playerId===e?{...s,playerName:t}:s))},[]),er=(0,s.useCallback)((e,t)=>{let s,r=(s=t.trim()).length?s:"p1"===e?"Player 1":"p2"===e?"Player 2":"Player 3";i(t=>t.map(t=>t.id===e?{...t,name:r}:t)),d(t=>t.map(t=>t.playerId===e?{...t,playerName:r}:t))},[]),el=(0,s.useCallback)(()=>{try{let e={players:a,history:n,currentIndex:o,boardSkin:u,playerCount:r,showHistory:x,removedEntries:N.current};localStorage.setItem(S,JSON.stringify(e))}catch{}},[u,o,n,r,a,x]);(0,s.useEffect)(()=>{e(()=>ee())},[e,ee]),(0,s.useEffect)(()=>{try{let e=localStorage.getItem(S);if(e){let t=JSON.parse(e);if(t){q.current=!0;let e=3===t.playerCount?3:2;l(e);let s=M(e),r=t.players?s.map(e=>{let s=t.players?.find(t=>t.id===e.id);return s?{...e,name:s.name??e.name,color:s.color??e.color}:e}):s,a=new Set(r.map(e=>e.id)),n=t.history?.filter(e=>a.has(e.playerId))??[];i(r),d(n),c("number"==typeof t.currentIndex?t.currentIndex:-1),"boolean"==typeof t.showHistory&&h(t.showHistory),t.removedEntries&&Array.isArray(t.removedEntries)&&(N.current=t.removedEntries,T(t.removedEntries.length)),t.boardSkin&&$.includes(t.boardSkin)&&m(t.boardSkin)}}}catch{}finally{w.current=!0}},[]),(0,s.useEffect)(()=>{if(w.current){if(q.current){q.current=!1;return}el()}},[el]),(0,s.useEffect)(()=>{if(!p)return;let e=e=>{b(null);let t=a.find(e=>e.id===p);if(!t||!f.current)return;let s=f.current.getBoundingClientRect(),r=e.clientX-s.left,l=e.clientY-s.top,i=t.score,n=1/0;Y.forEach(e=>{let t=e.pos.left/100*s.width,a=e.pos.top/100*s.height,d=t-r,o=a-l,c=d*d+o*o;c<n&&(n=c,i=e.score)});let d=Math.min(Math.max(i,-1),121);d>t.score&&X(t.id,d-t.score)};return window.addEventListener("pointerup",e,{once:!0}),window.addEventListener("pointercancel",e,{once:!0}),()=>{window.removeEventListener("pointerup",e),window.removeEventListener("pointercancel",e)}},[X,p,a,Y]);let ea=(0,s.useCallback)(()=>{document.fullscreenElement?document.exitFullscreen?.():f.current?.requestFullscreen?.()},[]);return(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-2xl font-semibold text-white",children:"Online Cribbage Board"}),(0,t.jsx)("p",{className:"mt-2 text-sm text-slate-300",children:"Move pegs by dragging the trailing peg or tapping a score button. Every move is logged for undo and redo."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ee(),className:"rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white hover:bg-white/20",children:"New game"}),(0,t.jsx)("button",{type:"button",onClick:ea,className:"rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white hover:bg-white/20",children:"Fullscreen"})]})]}),(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-slate-200",children:[(0,t.jsx)("span",{className:"font-semibold text-emerald-300",children:"Undo/Redo:"})," Use the buttons in the history panel.",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"font-semibold text-emerald-300",children:"Edit Names:"})," Click a name to rename."]}),(0,t.jsx)("div",{className:"mt-5 space-y-5",children:(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsxs)("div",{className:"flex flex-col grow gap-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-inner",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsx)("div",{children:(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.3em] text-slate-400",children:"Board"})}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>h(e=>!e),className:"rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-xs font-semibold text-white hover:bg-white/20",children:x?"Hide history":"Show history"}),(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{type:"button",onClick:()=>ee(2),className:`px-3 py-1.5 transition ${2===J?"bg-white/20":"hover:bg-white/10"}`,children:"2 players"}),(0,t.jsx)("button",{type:"button",onClick:()=>ee(3),className:`px-3 py-1.5 transition ${3===J?"bg-white/20":"hover:bg-white/10"}`,children:"3 players"})]})]})]}),(0,t.jsx)("div",{className:"mt-4 flex gap-4",children:(0,t.jsx)("div",{className:"rounded-xl border border-white/10 bg-black/30 p-3 lg:order-1 w-full",children:a.map(e=>(0,t.jsxs)("div",{className:"mb-3 last:mb-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-300",children:[(0,t.jsx)("span",{className:P[e.color].text,children:e.name}),(0,t.jsxs)("span",{children:[e.score," pts"]})]}),(0,t.jsxs)("div",{className:"relative mt-1 h-2 rounded-full bg-white/10",children:[[0,61,91,121].map(s=>(0,t.jsx)("span",{className:"absolute top-0 h-full w-px bg-white/15",style:{left:`${s/121*100}%`},"aria-hidden":!0},`${e.id}-mark-${s}`)),(0,t.jsx)("div",{className:`absolute left-0 top-0 h-full rounded-full ${P[e.color].peg}`,style:{width:`${e.score/121*100}%`}})]})]},`bar-${e.id}`))})})]}),(0,t.jsx)("div",{className:`grid gap-4 ${2===J?"md:grid-cols-2":"md:grid-cols-3"}`,children:a.map(e=>(0,t.jsxs)("div",{className:`rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner ${P[e.color].border}`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)("input",{value:e.name,onChange:t=>es(e.id,t.target.value),onBlur:t=>er(e.id,t.target.value),className:"w-full bg-transparent text-lg font-semibold text-white outline-none"})}),(0,t.jsxs)("div",{className:"text-sm text-slate-300 whitespace-nowrap",children:[e.score," pts"]})]}),(0,t.jsx)("div",{className:"mt-3 grid grid-cols-6 gap-1",children:C.map(s=>(0,t.jsxs)("button",{type:"button",onClick:()=>X(e.id,s),disabled:!!W,className:`rounded-lg border border-white/10 px-1 py-1 text-xs font-semibold text-white ${P[e.color].button} disabled:cursor-not-allowed disabled:opacity-50`,children:["+",s]},`${e.id}-score-${s}`))}),(0,t.jsx)("div",{className:"mt-3 flex items-center gap-2",children:(0,t.jsx)("div",{className:"flex items-center gap-1",children:E.map(s=>{let r=a.some(t=>t.id!==e.id&&t.color===s);return(0,t.jsx)("button",{type:"button",onClick:()=>et(e.id,s),disabled:r,className:`h-4 w-4 rounded-full border ${P[s].border} ${P[s].peg} ${e.color===s?"ring-2 ring-white/70":r?"opacity-20":"opacity-70 hover:opacity-100"}`,"aria-label":`Set ${e.name} color to ${s}`,title:s},`${e.id}-${s}`)})})})]},`${e.id}-controls`))})]}),x?(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner lg:order-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:Q,disabled:o<0&&0===_,className:"rounded-full border border-white/10 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white disabled:opacity-50",children:"Undo"}),(0,t.jsx)("button",{type:"button",onClick:Z,disabled:o>=n.length-1,className:"rounded-full border border-white/10 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white disabled:opacity-50",children:"Redo"}),(0,t.jsxs)("span",{className:"text-xs text-slate-300 whitespace-nowrap",children:[n.length," moves"]})]}),0===n.length?(0,t.jsx)("p",{className:"mt-3 text-sm text-slate-300",children:"No moves yet."}):(0,t.jsx)("ul",{className:"mt-3 max-h-full space-y-2 overflow-y-auto pr-1",children:[...n].reverse().map((e,s)=>{var r;let l,u=n.length-1-s>o,m=P[a.find(t=>t.id===e.playerId)?.color??"green"];return(0,t.jsxs)("li",{className:`flex items-center justify-between rounded-lg border border-white/10 ${m.historyBg} px-3 py-2 text-sm text-slate-100 ${u?"opacity-50":""}`,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"font-semibold",children:e.playerName}),(0,t.jsxs)("div",{className:"text-xs text-slate-300 whitespace-nowrap",children:["+",e.scoreToAdd," • ",e.oldScore," → ",e.newScore," •"," ",(r=e.timestamp,l=Math.max(0,Math.floor((Date.now()-r)/1e3)),`${l}s ago`)]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-slate-300",children:e.newScore>=121?"🏆":""}),(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{let t=v.current,s=t.findIndex(t=>t.id===e);if(-1===s)return;let r=t[s],l=t.filter((e,t)=>t!==s),a=g.current,n=a;s<=a&&(n=a-1),N.current.push({entry:r,index:s,prevIndex:a}),y.current="remove",T(N.current.length),v.current=l,d(l),g.current=n,c(n);let o=G(l,n,j.current);j.current=o,i(o)})(e.id),className:"flex h-6 w-6 items-center justify-center rounded-full border border-white/20 bg-white/10 text-xs text-white hover:bg-white/20","aria-label":"Remove history entry",children:"×"})]})]},e.id)})})]}):null]})}),H?(0,k.createPortal)((0,t.jsx)("div",{className:"fixed bottom-6 right-6 z-50 flex w-64 flex-col gap-2",children:z.map(e=>(0,t.jsx)("div",{className:`rounded-xl border border-white/15 ${e.bgClass} px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-black/40 backdrop-blur`,children:e.message},e.id))}),document.body):null]})}function z(e){let s,r=(s=new Map,e.forEach(e=>{let t=s.get(e.rank);t?t.suits.add(e.suit):s.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(s.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>n[e]-n[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")})));return(0,t.jsx)("span",{className:"flex flex-wrap items-center gap-1",children:r.map(({rank:e,suits:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:e}),(0,t.jsx)("span",{className:"flex items-center text-[11px]",children:s.map(s=>(0,t.jsx)("span",{className:"rounded py-[1px]",children:s},`${e}-${s}`))})]},`${e}-${s.join("")}`))})}function D({faceStyle:e,faceStyleToggle:s,testCards:l,testNote:a,testSelectedIds:i,testIncludeCrib:n,testIsDealer:d,showBestSolution:c,bestTestSuggestion:m,userTestChoice:x,handleToggleTestDiscard:h,refreshTestHand:p,onSetTestDealer:b,onSetTestIncludeCrib:g,onToggleShowBest:w,onSendToDiscard:j,testLoading:y}){let N=x?f(x.bestStarters):[],k=m?f(m.bestStarters):[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Test yourself"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"We deal 6 random cards. Pick two to throw to the crib and see how your line compares to the solver."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>b(!0),className:`px-3 py-1.5 transition ${d?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>b(!1),className:`px-3 py-1.5 transition ${!d?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:n,onChange:e=>g(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:s})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:l.map(s=>{let l=i.has(s.id);return(0,t.jsxs)("button",{onClick:()=>h(s),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${l?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(s,e),alt:o(s),fill:!0,sizes:"120px",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:l?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Discard"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Keep"})})]},s.id)})}),a&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:a})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Your discard line"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Pick exactly two discards to see the expected value."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:x?x.expectedValue.toFixed(2):"—"}),x&&n&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",x.handAverage.toFixed(2)," / Crib"," ",x.cribAverage.toFixed(2)]})]})]}),!x&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Select two cards to discard."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating expected value..."]})}),x&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(x.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`test-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(x.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`test-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.handAverage.toFixed(2)," pts"]})]}),n&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for your keep:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:N.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[z(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`user-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Best solution"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Solver tries every discard; crib math matches your settings."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:c&&m?m.expectedValue.toFixed(2):"—"}),c&&m&&n&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",m.handAverage.toFixed(2)," / Crib"," ",m.cribAverage.toFixed(2)]})]})]}),!m&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Waiting for a full 6-card deal."}),m&&!c&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Best line is hidden. Select two discards, then tap “Show best”."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best line..."]})}),m&&c&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(m.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`best-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(m.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`best-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.handAverage.toFixed(2)," pts"]})]}),n&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:k.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[z(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`best-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]}),x&&m&&c&&(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-lime-200/20 bg-lime-500/5 p-3 text-xs text-slate-200",children:[(0,t.jsx)("div",{className:"font-semibold text-white",children:"Comparison"}),(0,t.jsxs)("p",{className:"mt-1",children:["Your line: ",x.expectedValue.toFixed(2)," vs best:"," ",m.expectedValue.toFixed(2)," (",(m.expectedValue-x.expectedValue).toFixed(2)," ","diff)."]})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:w,className:`rounded-full border px-3 py-1.5 text-xs font-semibold transition ${c?"border-lime-200/60 bg-lime-500/20 text-lime-50":"border-white/20 bg-white/10 text-white hover:bg-white/20"} ${!m?"cursor-not-allowed opacity-50":""}`,disabled:!m,children:c?"Hide best":"Show best"})})]})]}),(0,t.jsx)("button",{onClick:p,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"Next question"}),(0,t.jsx)("button",{onClick:j,disabled:6!==l.length,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"View in discard tab"})]})}let B="cribbage-active-tab",H="cribbage-is-dealer",L="cribbage-include-crib",q="cribbage-face-style";function U(){let[e,r]=(0,s.useState)("test"),[l,i]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[f,k]=(0,s.useState)([]),[S,C]=(0,s.useState)(null),[$,E]=(0,s.useState)([]),[P,_]=(0,s.useState)(!1),[R,M]=(0,s.useState)(!0),[O,I]=(0,s.useState)(!0),[F,A]=(0,s.useState)([]),[z,U]=(0,s.useState)([]),[V,Y]=(0,s.useState)(null),[J,W]=(0,s.useState)(null),[K,G]=(0,s.useState)(null),[X,Q]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)("original"),er=(0,s.useRef)(null),el=(0,s.useRef)(null),ea=(0,s.useRef)(!1),ei=(0,s.useMemo)(()=>new Set([n,...l].filter(Boolean).map(e=>e.id)),[l,n]),en=(0,s.useMemo)(()=>new Set(z.map(e=>e.id)),[z]),ed=(0,s.useMemo)(()=>new Set(f.map(e=>e.id)),[f]),eo=(0,s.useMemo)(()=>a.map(e=>({suit:e,cards:d.filter(t=>t.suit===e)})),[]),ec=(0,s.useMemo)(()=>{let e;return 4===l.length?{total:(e=[m(l),x(l),h(l),4!==l.length?{label:"Flush",points:0,detail:["Need exactly 4 hand cards to check for a flush."]}:l.every(e=>e.suit===l[0].suit)?{label:"Flush",points:4,detail:["4-card flush (no starter) = 4 pts"]}:{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]}]).reduce((e,t)=>e+t.points,0),parts:e}:null},[l]),eu=(0,s.useMemo)(()=>4===l.length&&n?p(l,n):null,[l,n]),em=4===l.length&&!!n;(0,s.useEffect)(()=>{em&&!ea.current&&(er.current?.scrollIntoView({behavior:"smooth",block:"start"}),ea.current=!0),em||(ea.current=!1)},[em]);let ex=(0,s.useCallback)(()=>{let e=[...d];for(let t=e.length-1;t>0;t-=1){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e.slice(0,6)},[]),eh=(0,s.useCallback)(()=>{A(v(ex())),U([]),Y(null),ee(!1)},[ex]),ep=(0,s.useCallback)((e,t)=>{u(null),i(v(e)),o(t),r("count")},[]);(0,s.useEffect)(()=>{let e=localStorage.getItem(B);("count"===e||"discard"===e||"test"===e||"board"===e)&&r(e);let t=localStorage.getItem(H);("true"===t||"false"===t)&&M("true"===t);let s=localStorage.getItem(L);("true"===s||"false"===s)&&I("true"===s);let l=localStorage.getItem(q);("simple"===l||"original"===l)&&es(l)},[]),(0,s.useEffect)(()=>{localStorage.setItem(B,e)},[e]),(0,s.useEffect)(()=>{localStorage.setItem(H,String(R))},[R]),(0,s.useEffect)(()=>{localStorage.setItem(L,String(O))},[O]),(0,s.useEffect)(()=>{localStorage.setItem(q,et)},[et]),(0,s.useEffect)(()=>{if(6!==f.length){E([]),_(!1);return}_(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{E(w(f,R,O)),_(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[f,O,R]),(0,s.useEffect)(()=>{if(6!==F.length||z.length<2){W(null),G(null),Q(!1);return}Q(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{W(w(F,R,O)[0]??null);let e=F.filter(e=>!z.some(t=>t.id===e.id)),t=d.filter(e=>!F.some(t=>t.id===e.id)),{average:s,best:r}=b(e,t),l=O?g(z,t,R):0,a=O?R?s+l:s-l:s,i=t.length?Math.min(...t.map(t=>p(e,t).total)):0;G({keep:e,discards:z,handAverage:s,cribAverage:l,expectedValue:a,bestStarters:r,minHandScore:i}),Q(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[O,R,F,z]),(0,s.useEffect)(()=>{"test"===e&&0===F.length&&eh()},[e,eh,F.length]);let eb=(0,t.jsx)(N,{faceStyle:et,onChange:es});return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-50",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-10 space-y-6",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-3 border-b border-white/10 pb-6 sm:flex-row sm:items-end sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-400",children:"Cribbage helper"}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-white sm:text-5xl",children:"Play faster, score smarter"}),(0,t.jsx)("p",{className:"mt-2 max-w-3xl text-sm text-slate-300",children:"Flip between counting a finished hand or plotting the best discard. Every result shows the math so you can trust the suggestion."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white shadow-lg shadow-slate-950/30",children:[(0,t.jsx)("button",{onClick:()=>r("count"),className:`px-3 py-2 transition ${"count"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Count a hand"}),(0,t.jsx)("button",{onClick:()=>r("discard"),className:`px-3 py-2 transition ${"discard"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Discard to crib"}),(0,t.jsx)("button",{onClick:()=>{r("test"),F.length||eh()},className:`px-3 py-2 transition ${"test"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Test yourself"}),(0,t.jsx)("button",{onClick:()=>r("board"),className:`px-3 py-2 transition ${"board"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Track a game"})]}),(0,t.jsx)("button",{onClick:"count"===e?()=>{i([]),o(null),u(null)}:"discard"===e?()=>{k([]),C(null),_(!1)}:"test"===e?eh:()=>el.current?.(),className:"inline-flex items-center justify-center rounded-full border border-white/15 bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-950/30 transition hover:-translate-y-[1px] hover:bg-white/20 hover:shadow-slate-900/50",children:"board"===e?"Reset game":"Reset selection"})]})]}),"count"===e&&(0,t.jsx)(j,{cardsBySuit:eo,hand:l,starter:n,note:c,faceStyle:et,faceStyleToggle:eb,selectedIds:ei,handleToggleCountCard:e=>{if(u(null),ei.has(e.id)){i(t=>t.filter(t=>t.id!==e.id)),o(t=>t?.id===e.id?null:t);return}l.length<4?i(t=>[...t,e]):n?u("You already picked 4 hand cards and a starter. Remove one to change."):o(e)},handOnlyBreakdown:ec,breakdown:eu,slotsFilled:em,picksRef:er}),"discard"===e&&(0,t.jsx)(y,{cardsBySuit:eo,discardPick:f,discardNote:S,discardSelectedIds:ed,handleToggleDiscardCard:e=>{(C(null),ed.has(e.id))?k(t=>{let s=t.filter(t=>t.id!==e.id);return _(!1),s}):f.length<6?k(t=>{let s=[...t,e];return 6===s.length&&_(!0),s}):C("You already picked 6 cards. Remove one to change the set.")},faceStyle:et,faceStyleToggle:eb,isDealer:R,includeCrib:O,onDealerChange:M,onIncludeCribChange:I,discardSuggestions:$,discardLoading:P,onStarterPick:ep}),"test"===e&&(0,t.jsx)(D,{faceStyle:et,faceStyleToggle:eb,testCards:F,testDiscards:z,testNote:V,testSelectedIds:en,testIncludeCrib:O,testIsDealer:R,showBestSolution:Z,bestTestSuggestion:J,userTestChoice:K,handleToggleTestDiscard:e=>{if(Y(null),z.some(t=>t.id===e.id)){let t=z.filter(t=>t.id!==e.id);U(t),2!==t.length&&ee(!1);return}if(z.length<2){let t=[...z,e];U(t),2===t.length?(Q(!0),ee(!0)):ee(!1);return}Y("You already picked 2 discards. Tap again to deselect.")},refreshTestHand:eh,onSetTestDealer:M,onSetTestIncludeCrib:I,onToggleShowBest:()=>J&&ee(e=>!e),onSendToDiscard:()=>{6===F.length&&(k(v(F)),C(null),_(!0),r("discard"))},testLoading:X}),"board"===e&&(0,t.jsx)(T,{onRegisterReset:e=>{el.current=e}})]})})}e.s(["default",()=>U],52683)}]);