(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,s)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:s,blurHeight:r,blurDataURL:a,objectFit:l}){let i=s?40*s:e,d=r?40*r:t,n=i&&d?`viewBox='0 0 ${i} ${d}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${n}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${n?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${a}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},87690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return l},imageConfigDefault:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return n}}),e.r(33525);let r=e.r(88143),a=e.r(87690),l=["-moz-initial","fill","none","scale-down",void 0];function i(e){return void 0!==e.default}function d(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function n({src:e,sizes:t,unoptimized:s=!1,priority:n=!1,preload:o=!1,loading:c,className:m,quality:x,width:h,height:u,fill:p=!1,style:f,overrideSrc:b,onLoad:g,onLoadingComplete:w,placeholder:j="empty",blurDataURL:v,fetchPriority:y,decoding:N="async",layout:k,objectFit:C,objectPosition:S,lazyBoundary:$,lazyRoot:_,...P},E){var M;let O,I,R,{imgConf:A,showAltText:F,blurComplete:T,defaultLoader:z}=E,D=A||a.imageConfigDefault;if("allSizes"in D)O=D;else{let e=[...D.deviceSizes,...D.imageSizes].sort((e,t)=>e-t),t=D.deviceSizes.sort((e,t)=>e-t),s=D.qualities?.sort((e,t)=>e-t);O={...D,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===z)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=P.loader||z;delete P.loader,delete P.srcSet;let H="__next_img_default"in B;if(H){if("custom"===O.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:s,...r}=t;return e(r)}}if(k){"fill"===k&&(p=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];e&&(f={...f,...e});let s={responsive:"100vw",fill:"100vw"}[k];s&&!t&&(t=s)}let L="",q=d(h),V=d(u);if((M=e)&&"object"==typeof M&&(i(M)||void 0!==M.src)){let t=i(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(I=t.blurWidth,R=t.blurHeight,v=v||t.blurDataURL,L=t.src,!p)if(q||V){if(q&&!V){let e=q/t.width;V=Math.round(t.height*e)}else if(!q&&V){let e=V/t.height;q=Math.round(t.width*e)}}else q=t.width,V=t.height}let U=!n&&!o&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:L)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,U=!1),O.unoptimized&&(s=!0),H&&!O.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let Y=d(x),J=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:C,objectPosition:S}:{},F?{}:{color:"transparent"},f),G=T||"empty"===j?null:"blur"===j?`url("data:image/svg+xml;charset=utf-8,${(0,r.getImageBlurSvg)({widthInt:q,heightInt:V,blurWidth:I,blurHeight:R,blurDataURL:v||"",objectFit:J.objectFit})}")`:`url("${j}")`,K=l.includes(J.objectFit)?"fill"===J.objectFit?"100% 100%":"cover":J.objectFit,W=G?{backgroundSize:K,backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:G}:{},X=function({config:e,src:t,unoptimized:s,width:r,quality:a,sizes:l,loader:i}){if(s)return{src:t,srcSet:void 0,sizes:void 0};let{widths:d,kind:n}=function({deviceSizes:e,allSizes:t},s,r){if(r){let s=/(^|\s)(1?\d?\d)vw/g,a=[];for(let e;e=s.exec(r);)a.push(parseInt(e[2]));if(a.length){let s=.01*Math.min(...a);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,r,l),o=d.length-1;return{sizes:l||"w"!==n?l:"100vw",srcSet:d.map((s,r)=>`${i({config:e,src:t,quality:a,width:s})} ${"w"===n?s:r+1}${n}`).join(", "),src:i({config:e,src:t,quality:a,width:d[o]})}}({config:O,src:e,unoptimized:s,width:q,quality:Y,sizes:t,loader:B}),Q=U?"lazy":c;return{props:{...P,loading:Q,fetchPriority:y,width:q,height:V,decoding:N,className:m,style:{...J,...W},sizes:X.sizes,srcSet:X.srcSet,src:b||X.src},meta:{unoptimized:s,preload:o||n,placeholder:j,fill:p}}}},98879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let r=e.r(71645),a="undefined"==typeof window,l=a?()=>{}:r.useLayoutEffect,i=a?()=>{}:r.useEffect;function d(e){let{headManager:t,reduceComponentsToState:s}=e;function d(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return a&&(t?.mountedInstances?.add(e.children),d()),l(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),l(()=>(t&&(t._pendingUpdate=d),()=>{t&&(t._pendingUpdate=d)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return p},defaultHead:function(){return m}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=e.r(55682),i=e.r(90809),d=e.r(43476),n=i._(e.r(71645)),o=l._(e.r(98879)),c=e.r(42732);function m(){return[(0,d.jsx)("meta",{charSet:"utf-8"},"charset"),(0,d.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function x(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===n.default.Fragment?e.concat(n.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let h=["name","httpEquiv","charSet","itemProp"];function u(e){let t,s,r,a;return e.reduce(x,[]).reverse().concat(m().reverse()).filter((t=new Set,s=new Set,r=new Set,a={},e=>{let l=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?l=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?l=!1:s.add(e.type);break;case"meta":for(let t=0,s=h.length;t<s;t++){let s=h[t];if(e.props.hasOwnProperty(s))if("charSet"===s)r.has(s)?l=!1:r.add(s);else{let t=e.props[s],r=a[s]||new Set;("name"!==s||!i)&&r.has(t)?l=!1:(r.add(t),a[s]=r)}}}return l})).reverse().map((e,t)=>{let s=e.key||t;return n.default.cloneElement(e,{key:s})})}let p=function({children:e}){let t=(0,n.useContext)(c.HeadManagerContext);return(0,d.jsx)(o.default,{reduceComponentsToState:u,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return l}});let r=e.r(55682)._(e.r(71645)),a=e.r(87690),l=r.default.createContext(a.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,s)=>{"use strict";function r(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let r=e.r(70965);function a({config:e,src:t,width:s,quality:a}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let l=(0,r.findClosestQuality)(a,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${l}${t.startsWith("/_next/static/media/"),""}`}a.__next_img_default=!0;let l=a},18581,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=e.r(71645);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=l(e,r)),t&&(a.current=l(t,r))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},5500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return j}});let r=e.r(55682),a=e.r(90809),l=e.r(43476),i=a._(e.r(71645)),d=r._(e.r(74080)),n=r._(e.r(25633)),o=e.r(8927),c=e.r(87690),m=e.r(18556);e.r(33525);let x=e.r(65856),h=r._(e.r(1948)),u=e.r(18581),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function f(e,t,s,r,a,l,i){let d=e?.src;e&&e["data-loaded-src"]!==d&&(e["data-loaded-src"]=d,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,a=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function b(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let g=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:r,width:a,decoding:d,className:n,style:o,fetchPriority:c,placeholder:m,loading:x,unoptimized:h,fill:p,onLoadRef:g,onLoadingCompleteRef:w,setBlurComplete:j,setShowAltText:v,sizesInput:y,onLoad:N,onError:k,...C},S)=>{let $=(0,i.useCallback)(e=>{e&&(k&&(e.src=e.src),e.complete&&f(e,m,g,w,j,h,y))},[e,m,g,w,j,k,h,y]),_=(0,u.useMergedRef)(S,$);return(0,l.jsx)("img",{...C,...b(c),loading:x,width:a,height:r,decoding:d,"data-nimg":p?"fill":"1",className:n,style:o,sizes:s,srcSet:t,src:e,ref:_,onLoad:e=>{f(e.currentTarget,m,g,w,j,h,y)},onError:e=>{v(!0),"empty"!==m&&j(!0),k&&k(e)}})});function w({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...b(t.fetchPriority)};return e&&d.default.preload?(d.default.preload(t.src,s),null):(0,l.jsx)(n.default,{children:(0,l.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let j=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(x.RouterContext),r=(0,i.useContext)(m.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=p||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),a=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:a,localPatterns:"undefined"==typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:d,onLoadingComplete:n}=e,u=(0,i.useRef)(d);(0,i.useEffect)(()=>{u.current=d},[d]);let f=(0,i.useRef)(n);(0,i.useEffect)(()=>{f.current=n},[n]);let[b,j]=(0,i.useState)(!1),[v,y]=(0,i.useState)(!1),{props:N,meta:k}=(0,o.getImgProps)(e,{defaultLoader:h.default,imgConf:a,blurComplete:b,showAltText:v});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g,{...N,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:u,onLoadingCompleteRef:f,setBlurComplete:j,setShowAltText:y,sizesInput:e.sizes,ref:t}),k.preload?(0,l.jsx)(w,{isAppRouter:!s,imgAttributes:N}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},94909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return c},getImageProps:function(){return o}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=e.r(55682),i=e.r(8927),d=e.r(5500),n=l._(e.r(1948));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=d.Image},57688,(e,t,s)=>{t.exports=e.r(94909)},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(57688);let a=[{label:"A",value:1,order:1},{label:"2",value:2,order:2},{label:"3",value:3,order:3},{label:"4",value:4,order:4},{label:"5",value:5,order:5},{label:"6",value:6,order:6},{label:"7",value:7,order:7},{label:"8",value:8,order:8},{label:"9",value:9,order:9},{label:"10",value:10,order:10},{label:"J",value:10,order:11},{label:"Q",value:10,order:12},{label:"K",value:10,order:13}],l=["♠","♥","♦","♣"],i={"♠":{name:"Spades",slug:"spades",color:"text-slate-200"},"♥":{name:"Hearts",slug:"hearts",color:"text-red-200"},"♦":{name:"Diamonds",slug:"diamonds",color:"text-rose-200"},"♣":{name:"Clubs",slug:"clubs",color:"text-emerald-200"}},d={"♠":0,"♥":1,"♦":2,"♣":3},n=a.flatMap(e=>l.map(t=>({rank:e.label,value:e.value,order:e.order,suit:t,id:`${e.label}${t}`})));function o(e){return`${e.rank}${e.suit}`}let c={A:"ace",J:"jack",Q:"queen",K:"king",10:"10",9:"9",8:"8",7:"7",6:"6",5:"5",4:"4",3:"3",2:"2"};function m(e,t){let s=i[e.suit].slug,r=c[e.rank]??e.rank.toLowerCase(),a=["J","Q","K"].includes(e.rank);return`./cards/${r}_of_${s}${a&&"original"===t?"2":""}.svg`}function x(e){let t,s,r=(t=[],s=[],!function r(a){s.length&&t.push([...s]);for(let t=a;t<e.length;t+=1)s.push(e[t]),r(t+1),s.pop()}(0),t),a=[];return r.forEach(e=>{15===e.reduce((e,t)=>e+t.value,0)&&e.length>=2&&a.push(`${e.map(o).join(" + ")} = 15`)}),{label:"Fifteens",points:2*a.length,detail:a.length?a.map(e=>`${e} (2 pts)`):["No combinations totaled 15."]}}function h(e){let t=e.reduce((e,t)=>(e[t.rank]=(e[t.rank]??0)+1,e),{}),s=[],r=0;return Object.entries(t).forEach(([e,t])=>{if(t>=2){let a=t*(t-1)/2,l=2===t?"Pair":`${t} of a kind`;s.push(`${l} of ${e}s → ${2*a} pts`),r+=2*a}}),s.length||s.push("No pairs."),{label:"Pairs",points:r,detail:s}}function u(e){let t=e.reduce((e,t)=>(e[t.order]=(e[t.order]??0)+1,e),{}),s=0,r=0,l=[],i=1;for(;i<=13;){if(!t[i]){i+=1;continue}let e=i,d=1;for(;t[e];)d*=t[e],e+=1;let n=e-i;if(n>=3){let e=Array.from({length:n},(e,t)=>i+t).map(e=>{let t=a.find(t=>t.order===e);return t?.label??e.toString()}).join("-"),t=n*d;n>s?(s=n,r=t,l.length=0,l.push(`Run of ${n} (${e}) \xd7${d} = ${t} pts`)):n===s&&(r+=t,l.push(`Run of ${n} (${e}) \xd7${d} = ${t} pts`))}i=e+1}return l.length||l.push("No runs (need 3+ consecutive ranks)."),{label:"Runs",points:r,detail:l}}function p(e,t){let s,r=[...e,t],a=[x(r),h(r),u(r),function(e,t){if(!e.every(t=>t.suit===e[0].suit))return{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]};let s=t.suit===e[0].suit;return{label:"Flush",points:s?5:4,detail:[s?"5-card flush (hand + starter) = 5 pts":"4-card flush (hand only) = 4 pts"]}}(e,t),{label:"His Nobs",points:+!!(s=e.find(e=>"J"===e.rank&&e.suit===t.suit)),detail:s?[`Jack of ${t.suit} in hand matches starter suit = 1 pt`]:["No matching Jack for starter suit."]}];return{total:a.reduce((e,t)=>e+t.points,0),parts:a}}function f(e,t){if(!t.length)return{average:0,best:[]};let s=t.map(t=>({card:t,score:p(e,t).total})),r=s.reduce((e,t)=>e+t.score,0),a=[...s].sort((e,t)=>t.score-e.score),l=[],i=new Set;for(let e of a){if(i.size>=3&&!i.has(e.score))break;l.push(e),i.add(e.score)}return{average:r/s.length,best:l}}function b(e){let t=new Map;return e.forEach(({card:e,score:s})=>{let r=t.get(s)??[];r.push(e),t.set(s,r)}),Array.from(t.entries()).sort((e,t)=>t[0]-e[0]).map(([e,t])=>({score:e,cards:j(t)}))}function g(e,t,s){if(!t.length)return 0;let r=0,a=0;for(let l=0;l<t.length;l+=1){let i=t[l];for(let d=l+1;d<t.length;d+=1){let n=t[d];if(s||"5"!==i.rank&&"5"!==n.rank&&i.rank!==n.rank)for(let s=0;s<t.length;s+=1)s!==l&&s!==d&&(r+=p([...e,i,n],t[s]).total,a+=1)}}return a?r/a:0}function w(e,t,s){let r,a;if(6!==e.length)return[];let l=n.filter(t=>!e.some(e=>e.id===t.id));return(r=[],a=[],!function t(s,l){if(4===l)return void r.push([...a]);for(let r=s;r<e.length;r+=1)a.push(e[r]),t(r+1,l+1),a.pop()}(0,0),r).map(r=>{let a=e.filter(e=>!r.some(t=>t.id===e.id)),{average:i,best:d}=f(r,l),n=s?g(a,l,t):0,o=l.length?Math.min(...l.map(e=>p(r,e).total)):0,c=s?t?i+n:i-n:i;return{keep:r,discards:a,handAverage:i,cribAverage:n,expectedValue:c,bestStarters:d,minHandScore:o}}).sort((e,t)=>t.expectedValue-e.expectedValue).slice(0,3)}function j(e){return[...e].sort((e,t)=>e.order!==t.order?e.order-t.order:d[e.suit]-d[t.suit])}function v({cardsBySuit:e,hand:s,starter:a,note:l,faceStyle:i,faceStyleToggle:d,selectedIds:n,handleToggleCountCard:c,handOnlyBreakdown:x,breakdown:h,slotsFilled:u,picksRef:p}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Full deck"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[n.size,"/5 selected"]})]}),d]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:l})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:l.map(e=>{let l=s.some(t=>t.id===e.id),d=a?.id===e.id,n=l||d;return(0,t.jsxs)("button",{onClick:()=>c(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${n?"border-lime-200 ring-2 ring-lime-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:m(e,i),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:[l&&(0,t.jsx)("span",{className:"rounded-full bg-emerald-500/90 px-2 py-0.5 text-white shadow",children:"Hand"}),d&&(0,t.jsx)("span",{className:"rounded-full bg-amber-400/90 px-2 py-0.5 text-amber-950 shadow",children:"Starter"}),!n&&(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})]})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your picks"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click a card to add it. Click again to remove. The first 4 go to your hand, then the starter."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-emerald-400/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Hand"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-amber-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-amber-400"}),"Starter"]})]})]}),(0,t.jsxs)("div",{ref:p,className:"mt-4 grid grid-cols-4 gap-1 sm:grid-cols-5",children:[Array.from({length:4}).map((e,a)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[a]&&c(s[a]),className:"rounded-xl border border-emerald-300/20 bg-emerald-500/10 px-2 py-2 text-center text-sm text-emerald-100 shadow-inner shadow-emerald-900/50 transition hover:border-emerald-200/60 hover:shadow-lg hover:shadow-emerald-900/40 disabled:cursor-default",disabled:!s[a],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:["Hand ",a+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-emerald-200/40 bg-white/90 shadow",children:s[a]?(0,t.jsx)(r.default,{src:m(s[a],i),alt:o(s[a]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-emerald-200",children:"—"})})})]},`hand-${a}`)),(0,t.jsxs)("button",{type:"button",onClick:()=>a&&c(a),className:"rounded-xl border border-amber-300/30 bg-amber-500/10 px-3 py-4 text-center text-sm text-amber-100 shadow-inner shadow-amber-900/40 transition hover:border-amber-200/60 hover:shadow-lg hover:shadow-amber-900/30 disabled:cursor-default",disabled:!a,children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-200",children:"Starter"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-amber-200/40 bg-white/90 shadow",children:a?(0,t.jsx)(r.default,{src:m(a,i),alt:o(a),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-amber-200",children:"—"})})})]})]}),l&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:l})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-lime-300/20 bg-lime-500/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Score"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Totals refresh as soon as you finish the hand."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-300",children:"Total"}),(0,t.jsx)("div",{className:"text-4xl font-black text-lime-200",children:h?h.total:"—"}),!u&&x&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-slate-200",children:["Hand only (no starter):"," ",(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.total," pts"]})]})]})]}),!u&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:x?"Pick a starter to see the full breakdown. Hand-only score shown below.":"Pick 4 hand cards and 1 starter to see the breakdown."}),h&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:h.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},e.label))}),!h&&x&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:x.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},`hand-only-${e.label}`))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200 shadow-lg shadow-black/40",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-white",children:"How scoring works"}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"• Fifteens: every unique combo totaling 15 is worth 2."}),(0,t.jsx)("li",{children:"• Pairs: each pair scores 2 (pairs of a kind stack)."}),(0,t.jsx)("li",{children:"• Runs: longest run of 3+ in the hand; duplicates multiply runs."}),(0,t.jsx)("li",{children:"• Flush: 4 hand cards same suit = 4; starter match makes 5."}),(0,t.jsx)("li",{children:"• His Nobs: Jack in hand matching the starter suit = 1."})]})]})]})]})]})}function y({cardsBySuit:e,discardPick:s,discardNote:a,discardSelectedIds:l,handleToggleDiscardCard:i,faceStyle:n,faceStyleToggle:c,isDealer:x,includeCrib:h,onDealerChange:u,onIncludeCribChange:p,discardSuggestions:f,discardLoading:g,onStarterPick:w}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Pick any 6 cards"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[l.size,"/6 selected"]})]}),c]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:s})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:s.map(e=>{let s=l.has(e.id);return(0,t.jsxs)("button",{onClick:()=>i(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${s?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:m(e,n),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:s?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Picked"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your six-card hand"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click to add, click again to remove. We will try every possible discard to find the best expected value."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>u(!0),className:`px-3 py-1.5 transition ${x?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>u(!1),className:`px-3 py-1.5 transition ${!x?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:h,onChange:e=>p(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:Array.from({length:6}).map((e,a)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[a]&&i(s[a]),className:"rounded-xl border border-sky-300/30 bg-sky-500/10 px-2 py-2 text-center text-sm text-sky-100 shadow-inner shadow-sky-900/40 transition hover:border-sky-200/60 hover:shadow-lg hover:shadow-sky-900/40 disabled:cursor-default",disabled:!s[a],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-sky-200",children:["Card ",a+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-sky-200/40 bg-white/90 shadow",children:s[a]?(0,t.jsx)(r.default,{src:m(s[a],n),alt:o(s[a]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-sky-200",children:"—"})})})]},`discard-${a}`))}),a&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:a})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Discard suggestions"}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["We average every possible starter from the unseen cards.",h?x?" Expected value = hand average + crib average.":" Expected value = hand average - crib average.":" Crib is ignored when computing the average."]})]}),(0,t.jsx)("div",{className:"text-xs text-slate-300",children:"Crib assumption: when you are non-dealer, you avoid throwing 5s or pairs."})]}),s.length<6&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Pick 6 cards to see the best discard lines."}),6===s.length&&(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[g&&(0,t.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best discard lines..."]})}),!g&&f.map((e,s)=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"rounded-full bg-sky-500/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-100",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-200",children:"Keep the four below, discard the two to the crib."}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Best starters highlight spikes you can hope to cut."})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:e.expectedValue.toFixed(2)}),h&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",e.handAverage.toFixed(2)," / Crib"," ",e.cribAverage.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-[1.2fr,0.8fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.keep.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard to crib"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.discards.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.handAverage.toFixed(2)," pts"]})]}),h&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for this keep:"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:b(e.bestStarters).map(({cards:s,score:r})=>{let a,l=(a=new Map,s.forEach(e=>{let t=a.get(e.rank);t?t.suits.add(e.suit):a.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(a.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>d[e]-d[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")}))).map(({rank:e,suits:t})=>{let r=[...t].sort((e,t)=>d[e]-d[t]),a=s.filter(t=>t.rank===e).sort((e,t)=>d[e.suit]-d[t.suit]||e.order-t.order)[0]??s[0];return{rank:e,suits:r,starterCard:a}});return(0,t.jsx)("div",{className:"flex flex-col gap-2 rounded-xl border border-sky-200/30 py-1 px-2 shadow-sm shadow-sky-900/30",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(({rank:s,suits:a,starterCard:l})=>(0,t.jsx)("button",{type:"button",onClick:()=>l&&w(e.keep,l),className:"inline-flex items-center gap-2 rounded-full border border-sky-200/60 bg-sky-500/20 px-3 py-1 text-xs font-semibold text-sky-50 transition hover:-translate-y-[1px] hover:border-sky-100 hover:bg-sky-400/30 hover:shadow-sky-500/30",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:s}),(0,t.jsx)("span",{className:"flex items-center gap-0.5 text-[11px]",children:a.map(e=>(0,t.jsx)("span",{className:"rounded bg-sky-400/40 px-1 py-[1px]",children:e},`${s}-${e}`))})]})},`starter-${r}-${s}-${l.id}`))}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-lg font-bold text-sky-50",children:[r," pts"]})})]})},`starter-block-${r}-${s.map(e=>e.id).join("-")}`)})})]})]})]},e.keep.map(e=>e.id).join("-")))]})]})]})]})}function N({faceStyle:e,onChange:s}){return(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-slate-300",children:"Face style"}),(0,t.jsx)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10",children:["simple","original"].map(r=>(0,t.jsx)("button",{onClick:()=>s(r),className:`px-3 py-1 font-semibold transition ${e===r?"bg-white/20 text-white":"text-slate-200 hover:bg-white/10"}`,children:"simple"===r?"Simple":"Original"},r))})]})}let k="cribbage-board-state",C=[{id:"p1",defaultName:"Player 1",pegClass:"bg-rose-700 border-rose-500",trailClass:"bg-rose-700 border-rose-500",badgeClass:"bg-rose-500/15 border-rose-400/30 text-rose-50",glowClass:"shadow-rose-500/40",textClass:"text-rose-100",ringClass:"ring-rose-300/60"},{id:"p2",defaultName:"Player 2",pegClass:"bg-sky-700 border-sky-500",trailClass:"bg-sky-700 border-sky-500",badgeClass:"bg-sky-500/15 border-sky-400/30 text-sky-50",glowClass:"shadow-sky-500/40",textClass:"text-sky-100",ringClass:"ring-sky-300/60"},{id:"p3",defaultName:"Player 3",pegClass:"bg-emerald-700 border-emerald-500",trailClass:"bg-emerald-700 border-emerald-500",badgeClass:"bg-emerald-500/15 border-emerald-400/40 text-emerald-50",glowClass:"shadow-emerald-500/40",textClass:"text-emerald-100",ringClass:"ring-emerald-300/60"}],S=Array.from({length:29},(e,t)=>t+1),$=[-8,8];function _(e){return C.slice(0,e).map((e,t)=>({id:e.id,name:e.defaultName.replace(/\d/,`${t+1}`),preset:e}))}let P=(e,t,s,r,a=0)=>{let l=Math.min(Math.max(e,0),t),i=Math.max(0,100-s-r-Math.max(0,t*a));return s+l*a+l/Math.max(1,t||1)*i};function E({onRegisterReset:e}){let[r,a]=(0,s.useState)(2),[l,i]=(0,s.useState)(()=>_(2)),[d,n]=(0,s.useState)([]),o=(0,s.useRef)(!1),[c,m]=(0,s.useState)(!1),x=(0,s.useMemo)(()=>l.map(e=>{let t=d.filter(t=>t.playerId===e.id),s=t[t.length-1],r=t.length,a=t.length?Math.max(...t.map(e=>e.amount)):0,l=t.reduce((e,t)=>e+t.amount,0),i=t.length>=2?t[t.length-2].after:0,n=r%2==0,o=s?s.after:0,c=s?i:0;return{...e,current:s?s.after:0,previous:i,trail:c,pegA:n?o:c,pegB:n?c:o,moves:r,maxJump:a,totalAdded:l}}),[l,d]),h=(0,s.useMemo)(()=>4*x.length+1,[x.length]);(0,s.useEffect)(()=>{let e=window.matchMedia("(max-width: 640px)");m(e.matches);let t=e=>m(e.matches);return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[]);let u=(0,s.useCallback)(e=>c?P(e,h-1,4,4,2):P(e,h-1,6,6,2),[c,h]),p=(0,s.useCallback)(e=>c?P(e,39,6,6):P(e,39,4,4),[c]),f=(0,s.useMemo)(()=>{let e=[];for(let t=0;t<x.length;t+=1)e.push({type:"start",playerIndex:t});for(let t=0;t<3;t+=1)for(let s=0;s<x.length;s+=1)e.push({type:"segment",playerIndex:s,segment:t});return e.push({type:"finish"}),e},[x.length]),b=(0,s.useMemo)(()=>l.reduce((e,t)=>(e[t.id]=t.preset,e),{}),[l]),g=(0,s.useMemo)(()=>d.find(e=>e.after>=121)??null,[d]),w=2===x.length?"sm:grid-cols-2 lg:grid-cols-2":"sm:grid-cols-2 lg:grid-cols-3",j=(0,s.useCallback)(e=>{let t=e??r,s=_(t);a(t),i(s),n([]);try{localStorage.removeItem(k)}catch{}},[r]);(0,s.useEffect)(()=>{e(()=>j())},[e,j]),(0,s.useEffect)(()=>{if(!o.current)try{let e=localStorage.getItem(k);if(e){let t=JSON.parse(e);if(t&&t.playerCount&&[2,3].includes(t.playerCount)){let e=_(t.playerCount).map(e=>{let s=t.players?.find(t=>t.id===e.id);return s?{...e,name:s.name||e.name}:e}),s=new Set(e.map(e=>e.id)),r=t.history?.filter(e=>e&&"string"==typeof e.playerId&&s.has(e.playerId)&&"number"==typeof e.before&&"number"==typeof e.after&&"number"==typeof e.amount)??[];a(t.playerCount),i(e),n(r)}}}catch{}finally{o.current=!0}},[]),(0,s.useEffect)(()=>{if(o.current)try{let e=JSON.stringify({playerCount:r,players:l.map(({id:e,name:t})=>({id:e,name:t})),history:d});localStorage.setItem(k,e)}catch{}},[d,r,l]);let v=e=>{e!==r&&j(e)},y=(e,t,s)=>{let r=u(((e,t)=>{if(t<=0)return e;if(t>=121)return h-1;let s=Math.floor((t-1)/40);return x.length+s*x.length+e})(t,e));if(e>=121)return c?{left:r,top:50}:{left:50,top:r};if(e<=0){let e=50+($[+("A"!==s)]??0);return c?{left:r,top:e}:{left:e,top:r}}let a=p((e-1)%40);return c?{left:r,top:a}:{left:a,top:r}},N=d.length,C=d.length?Math.max(...d.map(e=>e.amount)):0,E=d.reduce((e,t)=>e+t.amount,0),M=N?(E/N).toFixed(1):"0";return(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Keep score on a board"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Each player gets their own strip of +1 to +29 buttons. Tap to drop pegs down the classic 121 track—every move is logged so you can undo mistakes."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>v(2),className:`px-3 py-1.5 transition ${2===r?"bg-white/20":"hover:bg-white/10"}`,children:"2 players"}),(0,t.jsx)("button",{onClick:()=>v(3),className:`px-3 py-1.5 transition ${3===r?"bg-white/20":"hover:bg-white/10"}`,children:"3 players"})]}),(0,t.jsx)("button",{onClick:()=>j(),className:"rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white shadow-lg shadow-slate-950/40 transition hover:-translate-y-[1px] hover:bg-white/20",children:"Reset game"})]})]}),(0,t.jsxs)("div",{className:"mt-5 grid gap-5 lg:grid-cols-[1.2fr,0.8fr]",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"relative overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-5 shadow-xl shadow-black/50",children:[(0,t.jsxs)("div",{className:"absolute inset-0 opacity-30","aria-hidden":!0,children:[(0,t.jsx)("div",{className:"absolute inset-10 rounded-[28px] border border-white/5 bg-gradient-to-br from-emerald-500/5 via-sky-500/5 to-indigo-500/5 blur-3xl"}),(0,t.jsx)("div",{className:"absolute inset-4 rounded-[32px] border border-white/5"})]}),(0,t.jsxs)("div",{className:"relative space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-slate-400",children:"Board"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-white",children:"121-hole track"})]}),(0,t.jsx)("div",{className:"rounded-full border border-white/10 bg-white/10 px-3 py-1 text-xs text-slate-200",children:"First to 121 wins"})]}),(0,t.jsxs)("div",{className:`relative mx-auto ${c?"h-[800px]":"h-[400px]"} w-full max-w-5xl overflow-hidden rounded-2xl border border-emerald-200/10 bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-4 shadow-inner shadow-black/60`,children:[(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"repeating-linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02) 1px, transparent 1px, transparent 16px)"},"aria-hidden":!0}),(0,t.jsx)("div",{className:"absolute inset-0",children:f.map((e,s)=>{let a=u(s),l=c?{left:`${a}%`,top:0,bottom:0,transform:"translateX(-50%)"}:{top:`${a}%`,left:0,right:0,transform:"translateY(-50%)"},i=c?"absolute inset-y-0":"absolute inset-x-0";if("finish"===e.type)return(0,t.jsx)("div",{className:i,style:l,children:(0,t.jsx)("div",{className:"relative h-full w-full",children:(0,t.jsx)("div",{className:"absolute left-1/2 top-1/2 h-12 w-12 -translate-x-1/2 -translate-y-1/2 rounded-full border border-lime-300/50 bg-lime-300/20",children:(0,t.jsx)("div",{className:"absolute left-1/2 top-1/2 h-7 w-7 -translate-x-1/2 -translate-y-1/2 rounded-full border border-lime-300/70 bg-lime-300/40"})})})},`row-${s}`);let d=null!=e.playerIndex?x[e.playerIndex]:null,n=d?.preset;if("start"===e.type&&d)return(0,t.jsx)("div",{className:i,style:l,children:(0,t.jsx)("div",{className:`relative mx-auto ${c?"h-full w-12":"h-12 w-full"} max-w-3xl`,children:$.map((e,r)=>{let a=50+($[r]??0),l=c?{top:`${a}%`,left:"50%"}:{left:`${a}%`,top:"50%"};return(0,t.jsx)("span",{className:`absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border shadow ${n?.pegClass??"border-white/20 bg-white/10"}`,style:{...l,opacity:.2},"aria-hidden":!0},`start-${s}-${r}`)})})},`row-${s}`);if("segment"===e.type&&d&&void 0!==e.segment){let a=Array.from({length:7},(e,t)=>(t+1)*5),o=40*e.segment+1;return(0,t.jsx)("div",{className:i,style:l,children:(0,t.jsxs)("div",{className:`relative mx-auto ${c?"h-full w-12":"h-12 w-full"} max-w-5xl`,children:[a.map(e=>(0,t.jsx)("span",{className:`absolute ${c?"left-1 right-1 h-px":"top-1 bottom-1 w-px"} bg-white/15`,style:{...c?{top:`${p(e-.5)}%`}:{left:`${p(e-.5)}%`}},"aria-hidden":!0},`divider-${s}-${e}`)),Array.from({length:40},(e,r)=>{let a=p(r),l=o+r;return(0,t.jsx)("span",{title:`${d.name} score ${l}`,className:`absolute h-4 w-4 -translate-x-1/2 -translate-y-1/2 rounded-full border shadow-sm ${n?.trailClass??"border-white/20 bg-white/10"}`,style:{...c?{top:`${a}%`,left:"50%"}:{left:`${a}%`,top:"50%"},opacity:.2},"aria-hidden":!0},`hole-${s}-${r}`)}),s%r==0&&(0,t.jsxs)("div",{className:"absolute left-0 top-0 text-[11px] uppercase tracking-wide text-slate-300",children:[o,"–",o+40-1]})]})},`row-${s}`)}return null})}),(0,t.jsx)("div",{className:"opacity-0 absolute rounded-full bg-slate-800/80 px-2 py-1 text-[11px] font-semibold text-slate-200",style:{left:c?`${Math.max(2,u(0)-5)}%`:"50%",top:c?"6%":`${Math.max(2,u(0)-5)}%`,transform:"translateX(-50%)"},children:"Start"}),(0,t.jsx)("div",{className:"absolute rounded-full px-2 py-1 text-[11px] font-semibold text-lime-100",style:{left:"50%",bottom:"6%",transform:"translateX(-50%)"},children:"Finish"}),x.map((e,s)=>{let r=y(e.pegA,s,"A"),a=y(e.pegB,s,"B");return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"absolute z-20",style:{left:`${r.left}%`,top:`${r.top}%`,transition:"left 0.35s ease, top 0.35s ease"},children:(0,t.jsx)("div",{className:`h-4 w-4 ${e.preset.pegClass}`,style:{transform:"translate(-50%, -50%)"},title:`${e.name} peg A`})}),(0,t.jsx)("div",{className:"absolute z-10",style:{left:`${a.left}%`,top:`${a.top}%`,transition:"left 0.35s ease, top 0.35s ease"},children:(0,t.jsx)("div",{className:`h-4 w-4 ${e.preset.trailClass}`,style:{transform:"translate(-50%, -50%)"},title:`${e.name} peg B`})})]},e.id)})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:`grid gap-3 ${w}`,children:x.map(e=>(0,t.jsxs)("div",{className:`h-full rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30 ring-1 ${e.preset.ringClass}`,children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`h-3 w-3 rounded-full border ${e.preset.pegClass}`,"aria-hidden":!0}),(0,t.jsx)("input",{value:e.name,onChange:t=>{var s;let r;return s=e.id,r=t.target.value.trim()||l.find(e=>e.id===s)?.preset.defaultName||"Player",void(i(e=>e.map(e=>e.id===s?{...e,name:r}:e)),n(e=>e.map(e=>e.playerId===s?{...e,playerName:r}:e)))},className:"bg-transparent text-sm font-semibold text-white outline-none"})]}),(0,t.jsxs)("div",{className:"text-right text-xs text-slate-200",children:[(0,t.jsxs)("div",{className:"font-semibold text-white",children:[e.current," / ",121]}),(0,t.jsxs)("div",{className:"text-[11px] text-slate-300",children:["Last peg at ",e.previous]})]})]}),(0,t.jsx)("div",{className:"mt-3 grid grid-cols-5 gap-2",children:S.map(s=>(0,t.jsxs)("button",{onClick:()=>((e,t)=>{if(g)return;let s=x.find(t=>t.id===e);if(!s)return;let r=s.current,a=Math.min(121,r+t),l={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,playerId:s.id,playerName:s.name,amount:t,before:r,after:a,timestamp:Date.now()};n(e=>[...e,l])})(e.id,s),disabled:!!g,className:"rounded-lg border border-white/15 bg-white/10 px-2 py-2 text-center text-sm font-semibold text-white shadow-sm shadow-black/40 transition hover:-translate-y-[1px] hover:bg-white/20 hover:shadow-black/60 disabled:cursor-not-allowed disabled:opacity-50",title:`Add +${s} to ${e.name}`,children:["+",s]},`${e.id}-${s}`))})]},e.id))}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-xs text-slate-200 shadow-inner shadow-black/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-lime-300"}),(0,t.jsx)("span",{children:g?`${g.playerName} sealed it with +${g.amount}.`:"Tap a button under a player to add that many points."})]}),(0,t.jsx)("button",{onClick:()=>{d.length&&n(e=>e.slice(0,-1))},className:"inline-flex items-center gap-1 rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-[11px] font-semibold uppercase tracking-wide text-white shadow-sm shadow-black/50 transition hover:bg-white/20",children:"Undo last"})]})]})]})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-black/50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white",children:"Score history"}),(0,t.jsxs)("span",{className:"text-xs text-slate-300",children:[d.length," records"]})]}),0===d.length?(0,t.jsx)("p",{className:"mt-3 text-sm text-slate-300",children:"Every tap is logged here. Add a score to see the trail."}):(0,t.jsx)("ul",{className:"mt-3 max-h-[380px] space-y-2 overflow-y-auto pr-1",children:[...d].reverse().map(e=>{let s=b[e.playerId];return(0,t.jsxs)("li",{className:`flex items-center justify-between gap-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-100 ring-1 ring-inset ${s?.ringClass??"ring-white/5"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`h-2.5 w-2.5 rounded-full border ${s?.pegClass??"border-white/20 bg-white/20"}`,"aria-hidden":!0}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:`font-semibold ${s?.textClass??""}`,children:e.playerName}),(0,t.jsxs)("div",{className:"text-xs text-slate-300",children:[e.before," → ",e.after]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("span",{className:`rounded-full border px-2 py-0.5 text-[11px] font-semibold ${s?.badgeClass??"border-white/10 bg-white/10 text-white"}`,children:["+",e.amount]}),(0,t.jsx)("div",{className:"text-xs font-semibold text-lime-200",children:e.after>=121?"🏆":""})]})]},e.id)})})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-gradient-to-br from-emerald-500/20 via-sky-500/10 to-slate-900 p-4 shadow-lg shadow-black/50",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-white",children:g?"Game over":"Game stats"}),(0,t.jsxs)("span",{className:"rounded-full border border-white/10 bg-white/10 px-2 py-1 text-[11px] uppercase tracking-wide text-slate-200",children:[N," turns"]})]}),g?(0,t.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,t.jsxs)("p",{className:"text-sm text-lime-100",children:["Congratulations, ",g.playerName,"! You hit 121 with a +",g.amount," move."]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs text-slate-100",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-white/15 bg-white/10 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:"Last step"}),(0,t.jsxs)("div",{className:"text-base font-semibold text-white",children:[g.before," → ",g.after]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-white/15 bg-white/10 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:"Timeline"}),(0,t.jsxs)("div",{className:"text-base font-semibold text-white",children:[N," logged moves"]})]})]})]}):(0,t.jsx)("p",{className:"mt-3 text-sm text-slate-200",children:"Track every peg leap. First to 121 wins—no need to count holes, the board will do it."}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-2 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:"Biggest jump"}),(0,t.jsxs)("div",{className:"text-base font-semibold text-white",children:["+",C||0]})]}),(0,t.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2",children:[(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:"Average turn"}),(0,t.jsxs)("div",{className:"text-base font-semibold text-white",children:["+",M]})]}),x.map(e=>(0,t.jsxs)("div",{className:"rounded-lg border border-white/10 bg-white/5 px-3 py-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`h-2.5 w-2.5 rounded-full border ${e.preset.pegClass}`}),(0,t.jsx)("div",{className:"text-[11px] uppercase tracking-wide text-slate-300",children:e.name})]}),(0,t.jsxs)("div",{className:"mt-1 text-base font-semibold text-white",children:[e.current," pts • ",e.moves||0," moves"]}),(0,t.jsxs)("div",{className:"text-xs text-slate-300",children:["Longest leap +",e.maxJump||0," • Total +",e.totalAdded]})]},`stat-${e.id}`))]})]})]})]})]})}function M(e){let s,r=(s=new Map,e.forEach(e=>{let t=s.get(e.rank);t?t.suits.add(e.suit):s.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(s.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>d[e]-d[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")})));return(0,t.jsx)("span",{className:"flex flex-wrap items-center gap-1",children:r.map(({rank:e,suits:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:e}),(0,t.jsx)("span",{className:"flex items-center text-[11px]",children:s.map(s=>(0,t.jsx)("span",{className:"rounded py-[1px]",children:s},`${e}-${s}`))})]},`${e}-${s.join("")}`))})}function O({faceStyle:e,faceStyleToggle:s,testCards:a,testNote:l,testSelectedIds:i,testIncludeCrib:d,testIsDealer:n,showBestSolution:c,bestTestSuggestion:x,userTestChoice:h,handleToggleTestDiscard:u,refreshTestHand:p,onSetTestDealer:f,onSetTestIncludeCrib:g,onToggleShowBest:w,onSendToDiscard:v,testLoading:y}){let N=h?b(h.bestStarters):[],k=x?b(x.bestStarters):[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Test yourself"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"We deal 6 random cards. Pick two to throw to the crib and see how your line compares to the solver."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>f(!0),className:`px-3 py-1.5 transition ${n?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>f(!1),className:`px-3 py-1.5 transition ${!n?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:d,onChange:e=>g(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:s})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:a.map(s=>{let a=i.has(s.id);return(0,t.jsxs)("button",{onClick:()=>u(s),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${a?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:m(s,e),alt:o(s),fill:!0,sizes:"120px",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:a?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Discard"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Keep"})})]},s.id)})}),l&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:l})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Your discard line"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Pick exactly two discards to see the expected value."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:h?h.expectedValue.toFixed(2):"—"}),h&&d&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",h.handAverage.toFixed(2)," / Crib"," ",h.cribAverage.toFixed(2)]})]})]}),!h&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Select two cards to discard."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating expected value..."]})}),h&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:j(h.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`test-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:j(h.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`test-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.handAverage.toFixed(2)," pts"]})]}),d&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for your keep:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:N.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[M(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`user-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Best solution"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Solver tries every discard; crib math matches your settings."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:c&&x?x.expectedValue.toFixed(2):"—"}),c&&x&&d&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",x.handAverage.toFixed(2)," / Crib"," ",x.cribAverage.toFixed(2)]})]})]}),!x&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Waiting for a full 6-card deal."}),x&&!c&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Best line is hidden. Select two discards, then tap “Show best”."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best line..."]})}),x&&c&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:j(x.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`best-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:j(x.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`best-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.handAverage.toFixed(2)," pts"]})]}),d&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[x.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:k.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[M(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`best-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]}),h&&x&&c&&(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-lime-200/20 bg-lime-500/5 p-3 text-xs text-slate-200",children:[(0,t.jsx)("div",{className:"font-semibold text-white",children:"Comparison"}),(0,t.jsxs)("p",{className:"mt-1",children:["Your line: ",h.expectedValue.toFixed(2)," vs best:"," ",x.expectedValue.toFixed(2)," (",(x.expectedValue-h.expectedValue).toFixed(2)," ","diff)."]})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:w,className:`rounded-full border px-3 py-1.5 text-xs font-semibold transition ${c?"border-lime-200/60 bg-lime-500/20 text-lime-50":"border-white/20 bg-white/10 text-white hover:bg-white/20"} ${!x?"cursor-not-allowed opacity-50":""}`,disabled:!x,children:c?"Hide best":"Show best"})})]})]}),(0,t.jsx)("button",{onClick:p,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"Next question"}),(0,t.jsx)("button",{onClick:v,disabled:6!==a.length,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"View in discard tab"})]})}let I="cribbage-active-tab",R="cribbage-is-dealer",A="cribbage-include-crib",F="cribbage-face-style";function T(){let[e,r]=(0,s.useState)("test"),[a,i]=(0,s.useState)([]),[d,o]=(0,s.useState)(null),[c,m]=(0,s.useState)(null),[b,k]=(0,s.useState)([]),[C,S]=(0,s.useState)(null),[$,_]=(0,s.useState)([]),[P,M]=(0,s.useState)(!1),[T,z]=(0,s.useState)(!0),[D,B]=(0,s.useState)(!0),[H,L]=(0,s.useState)([]),[q,V]=(0,s.useState)([]),[U,Y]=(0,s.useState)(null),[J,G]=(0,s.useState)(null),[K,W]=(0,s.useState)(null),[X,Q]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)("original"),er=(0,s.useRef)(null),ea=(0,s.useRef)(null),el=(0,s.useRef)(!1),ei=(0,s.useMemo)(()=>new Set([d,...a].filter(Boolean).map(e=>e.id)),[a,d]),ed=(0,s.useMemo)(()=>new Set(q.map(e=>e.id)),[q]),en=(0,s.useMemo)(()=>new Set(b.map(e=>e.id)),[b]),eo=(0,s.useMemo)(()=>l.map(e=>({suit:e,cards:n.filter(t=>t.suit===e)})),[]),ec=(0,s.useMemo)(()=>{let e;return 4===a.length?{total:(e=[x(a),h(a),u(a),4!==a.length?{label:"Flush",points:0,detail:["Need exactly 4 hand cards to check for a flush."]}:a.every(e=>e.suit===a[0].suit)?{label:"Flush",points:4,detail:["4-card flush (no starter) = 4 pts"]}:{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]}]).reduce((e,t)=>e+t.points,0),parts:e}:null},[a]),em=(0,s.useMemo)(()=>4===a.length&&d?p(a,d):null,[a,d]),ex=4===a.length&&!!d;(0,s.useEffect)(()=>{ex&&!el.current&&(er.current?.scrollIntoView({behavior:"smooth",block:"start"}),el.current=!0),ex||(el.current=!1)},[ex]);let eh=(0,s.useCallback)(()=>{let e=[...n];for(let t=e.length-1;t>0;t-=1){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e.slice(0,6)},[]),eu=(0,s.useCallback)(()=>{L(j(eh())),V([]),Y(null),ee(!1)},[eh]),ep=(0,s.useCallback)((e,t)=>{m(null),i(j(e)),o(t),r("count")},[]);(0,s.useEffect)(()=>{let e=localStorage.getItem(I);("count"===e||"discard"===e||"test"===e||"board"===e)&&r(e);let t=localStorage.getItem(R);("true"===t||"false"===t)&&z("true"===t);let s=localStorage.getItem(A);("true"===s||"false"===s)&&B("true"===s);let a=localStorage.getItem(F);("simple"===a||"original"===a)&&es(a)},[]),(0,s.useEffect)(()=>{localStorage.setItem(I,e)},[e]),(0,s.useEffect)(()=>{localStorage.setItem(R,String(T))},[T]),(0,s.useEffect)(()=>{localStorage.setItem(A,String(D))},[D]),(0,s.useEffect)(()=>{localStorage.setItem(F,et)},[et]),(0,s.useEffect)(()=>{if(6!==b.length){_([]),M(!1);return}M(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{_(w(b,T,D)),M(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[b,D,T]),(0,s.useEffect)(()=>{if(6!==H.length||q.length<2){G(null),W(null),Q(!1);return}Q(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{G(w(H,T,D)[0]??null);let e=H.filter(e=>!q.some(t=>t.id===e.id)),t=n.filter(e=>!H.some(t=>t.id===e.id)),{average:s,best:r}=f(e,t),a=D?g(q,t,T):0,l=D?T?s+a:s-a:s,i=t.length?Math.min(...t.map(t=>p(e,t).total)):0;W({keep:e,discards:q,handAverage:s,cribAverage:a,expectedValue:l,bestStarters:r,minHandScore:i}),Q(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[D,T,H,q]),(0,s.useEffect)(()=>{"test"===e&&0===H.length&&eu()},[e,eu,H.length]);let ef=(0,t.jsx)(N,{faceStyle:et,onChange:es});return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-50",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-10 space-y-6",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-3 border-b border-white/10 pb-6 sm:flex-row sm:items-end sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-400",children:"Cribbage helper"}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-white sm:text-5xl",children:"Play faster, score smarter"}),(0,t.jsx)("p",{className:"mt-2 max-w-3xl text-sm text-slate-300",children:"Flip between counting a finished hand or plotting the best discard. Every result shows the math so you can trust the suggestion."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white shadow-lg shadow-slate-950/30",children:[(0,t.jsx)("button",{onClick:()=>r("count"),className:`px-3 py-2 transition ${"count"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Count a hand"}),(0,t.jsx)("button",{onClick:()=>r("discard"),className:`px-3 py-2 transition ${"discard"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Discard to crib"}),(0,t.jsx)("button",{onClick:()=>{r("test"),H.length||eu()},className:`px-3 py-2 transition ${"test"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Test yourself"}),(0,t.jsx)("button",{onClick:()=>r("board"),className:`px-3 py-2 transition ${"board"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Track a game"})]}),(0,t.jsx)("button",{onClick:"count"===e?()=>{i([]),o(null),m(null)}:"discard"===e?()=>{k([]),S(null),M(!1)}:"test"===e?eu:()=>ea.current?.(),className:"inline-flex items-center justify-center rounded-full border border-white/15 bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-950/30 transition hover:-translate-y-[1px] hover:bg-white/20 hover:shadow-slate-900/50",children:"board"===e?"Reset game":"Reset selection"})]})]}),"count"===e&&(0,t.jsx)(v,{cardsBySuit:eo,hand:a,starter:d,note:c,faceStyle:et,faceStyleToggle:ef,selectedIds:ei,handleToggleCountCard:e=>{if(m(null),ei.has(e.id)){i(t=>t.filter(t=>t.id!==e.id)),o(t=>t?.id===e.id?null:t);return}a.length<4?i(t=>[...t,e]):d?m("You already picked 4 hand cards and a starter. Remove one to change."):o(e)},handOnlyBreakdown:ec,breakdown:em,slotsFilled:ex,picksRef:er}),"discard"===e&&(0,t.jsx)(y,{cardsBySuit:eo,discardPick:b,discardNote:C,discardSelectedIds:en,handleToggleDiscardCard:e=>{(S(null),en.has(e.id))?k(t=>{let s=t.filter(t=>t.id!==e.id);return M(!1),s}):b.length<6?k(t=>{let s=[...t,e];return 6===s.length&&M(!0),s}):S("You already picked 6 cards. Remove one to change the set.")},faceStyle:et,faceStyleToggle:ef,isDealer:T,includeCrib:D,onDealerChange:z,onIncludeCribChange:B,discardSuggestions:$,discardLoading:P,onStarterPick:ep}),"test"===e&&(0,t.jsx)(O,{faceStyle:et,faceStyleToggle:ef,testCards:H,testDiscards:q,testNote:U,testSelectedIds:ed,testIncludeCrib:D,testIsDealer:T,showBestSolution:Z,bestTestSuggestion:J,userTestChoice:K,handleToggleTestDiscard:e=>{if(Y(null),q.some(t=>t.id===e.id)){let t=q.filter(t=>t.id!==e.id);V(t),2!==t.length&&ee(!1);return}if(q.length<2){let t=[...q,e];V(t),2===t.length?(Q(!0),ee(!0)):ee(!1);return}Y("You already picked 2 discards. Tap again to deselect.")},refreshTestHand:eu,onSetTestDealer:z,onSetTestIncludeCrib:B,onToggleShowBest:()=>J&&ee(e=>!e),onSendToDiscard:()=>{6===H.length&&(k(j(H)),S(null),M(!0),r("discard"))},testLoading:X}),"board"===e&&(0,t.jsx)(E,{onRegisterReset:e=>{ea.current=e}})]})})}e.s(["default",()=>T],52683)}]);