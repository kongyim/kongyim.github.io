(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,88143,(e,t,s)=>{"use strict";function r({widthInt:e,heightInt:t,blurWidth:s,blurHeight:r,blurDataURL:a,objectFit:l}){let i=s?40*s:e,n=r?40*r:t,d=i&&n?`viewBox='0 0 ${i} ${n}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${d}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${d?"none":"contain"===l?"xMidYMid":"cover"===l?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${a}'/%3E%3C/svg%3E`}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImageBlurSvg",{enumerable:!0,get:function(){return r}})},87690,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={VALID_LOADERS:function(){return l},imageConfigDefault:function(){return i}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=["default","imgix","cloudinary","akamai","custom"],i={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},8927,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"getImgProps",{enumerable:!0,get:function(){return d}}),e.r(33525);let r=e.r(88143),a=e.r(87690),l=["-moz-initial","fill","none","scale-down",void 0];function i(e){return void 0!==e.default}function n(e){return void 0===e?e:"number"==typeof e?Number.isFinite(e)?e:NaN:"string"==typeof e&&/^[0-9]+$/.test(e)?parseInt(e,10):NaN}function d({src:e,sizes:t,unoptimized:s=!1,priority:d=!1,preload:o=!1,loading:c,className:u,quality:h,width:m,height:x,fill:p=!1,style:f,overrideSrc:b,onLoad:g,onLoadingComplete:w,placeholder:v="empty",blurDataURL:j,fetchPriority:y,decoding:N="async",layout:k,objectFit:S,objectPosition:_,lazyBoundary:C,lazyRoot:$,...R},E){var P;let F,O,I,{imgConf:M,showAltText:z,blurComplete:A,defaultLoader:T}=E,D=M||a.imageConfigDefault;if("allSizes"in D)F=D;else{let e=[...D.deviceSizes,...D.imageSizes].sort((e,t)=>e-t),t=D.deviceSizes.sort((e,t)=>e-t),s=D.qualities?.sort((e,t)=>e-t);F={...D,allSizes:e,deviceSizes:t,qualities:s}}if(void 0===T)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let B=R.loader||T;delete R.loader,delete R.srcSet;let H="__next_img_default"in B;if(H){if("custom"===F.loader)throw Object.defineProperty(Error(`Image with src "${e}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let e=B;B=t=>{let{config:s,...r}=t;return e(r)}}if(k){"fill"===k&&(p=!0);let e={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[k];e&&(f={...f,...e});let s={responsive:"100vw",fill:"100vw"}[k];s&&!t&&(t=s)}let L="",q=n(m),U=n(x);if((P=e)&&"object"==typeof P&&(i(P)||void 0!==P.src)){let t=i(e)?e.default:e;if(!t.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!t.height||!t.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(t)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(O=t.blurWidth,I=t.blurHeight,j=j||t.blurDataURL,L=t.src,!p)if(q||U){if(q&&!U){let e=q/t.width;U=Math.round(t.height*e)}else if(!q&&U){let e=U/t.height;q=Math.round(t.width*e)}}else q=t.width,U=t.height}let V=!d&&!o&&("lazy"===c||void 0===c);(!(e="string"==typeof e?e:L)||e.startsWith("data:")||e.startsWith("blob:"))&&(s=!0,V=!1),F.unoptimized&&(s=!0),H&&!F.dangerouslyAllowSVG&&e.split("?",1)[0].endsWith(".svg")&&(s=!0);let Y=n(h),J=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:S,objectPosition:_}:{},z?{}:{color:"transparent"},f),W=A||"empty"===v?null:"blur"===v?`url("data:image/svg+xml;charset=utf-8,${(0,r.getImageBlurSvg)({widthInt:q,heightInt:U,blurWidth:O,blurHeight:I,blurDataURL:j||"",objectFit:J.objectFit})}")`:`url("${v}")`,K=l.includes(J.objectFit)?"fill"===J.objectFit?"100% 100%":"cover":J.objectFit,G=W?{backgroundSize:K,backgroundPosition:J.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},X=function({config:e,src:t,unoptimized:s,width:r,quality:a,sizes:l,loader:i}){if(s)return{src:t,srcSet:void 0,sizes:void 0};let{widths:n,kind:d}=function({deviceSizes:e,allSizes:t},s,r){if(r){let s=/(^|\s)(1?\d?\d)vw/g,a=[];for(let e;e=s.exec(r);)a.push(parseInt(e[2]));if(a.length){let s=.01*Math.min(...a);return{widths:t.filter(t=>t>=e[0]*s),kind:"w"}}return{widths:t,kind:"w"}}return"number"!=typeof s?{widths:e,kind:"w"}:{widths:[...new Set([s,2*s].map(e=>t.find(t=>t>=e)||t[t.length-1]))],kind:"x"}}(e,r,l),o=n.length-1;return{sizes:l||"w"!==d?l:"100vw",srcSet:n.map((s,r)=>`${i({config:e,src:t,quality:a,width:s})} ${"w"===d?s:r+1}${d}`).join(", "),src:i({config:e,src:t,quality:a,width:n[o]})}}({config:F,src:e,unoptimized:s,width:q,quality:Y,sizes:t,loader:B}),Q=V?"lazy":c;return{props:{...R,loading:Q,fetchPriority:y,width:q,height:U,decoding:N,className:u,style:{...J,...G},sizes:X.sizes,srcSet:X.srcSet,src:b||X.src},meta:{unoptimized:s,preload:o||d,placeholder:v,fill:p}}}},98879,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return n}});let r=e.r(71645),a="undefined"==typeof window,l=a?()=>{}:r.useLayoutEffect,i=a?()=>{}:r.useEffect;function n(e){let{headManager:t,reduceComponentsToState:s}=e;function n(){if(t&&t.mountedInstances){let e=r.Children.toArray(Array.from(t.mountedInstances).filter(Boolean));t.updateHead(s(e))}}return a&&(t?.mountedInstances?.add(e.children),n()),l(()=>(t?.mountedInstances?.add(e.children),()=>{t?.mountedInstances?.delete(e.children)})),l(()=>(t&&(t._pendingUpdate=n),()=>{t&&(t._pendingUpdate=n)})),i(()=>(t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null),()=>{t&&t._pendingUpdate&&(t._pendingUpdate(),t._pendingUpdate=null)})),null}},25633,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return p},defaultHead:function(){return u}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=e.r(55682),i=e.r(90809),n=e.r(43476),d=i._(e.r(71645)),o=l._(e.r(98879)),c=e.r(42732);function u(){return[(0,n.jsx)("meta",{charSet:"utf-8"},"charset"),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function h(e,t){return"string"==typeof t||"number"==typeof t?e:t.type===d.default.Fragment?e.concat(d.default.Children.toArray(t.props.children).reduce((e,t)=>"string"==typeof t||"number"==typeof t?e:e.concat(t),[])):e.concat(t)}e.r(33525);let m=["name","httpEquiv","charSet","itemProp"];function x(e){let t,s,r,a;return e.reduce(h,[]).reverse().concat(u().reverse()).filter((t=new Set,s=new Set,r=new Set,a={},e=>{let l=!0,i=!1;if(e.key&&"number"!=typeof e.key&&e.key.indexOf("$")>0){i=!0;let s=e.key.slice(e.key.indexOf("$")+1);t.has(s)?l=!1:t.add(s)}switch(e.type){case"title":case"base":s.has(e.type)?l=!1:s.add(e.type);break;case"meta":for(let t=0,s=m.length;t<s;t++){let s=m[t];if(e.props.hasOwnProperty(s))if("charSet"===s)r.has(s)?l=!1:r.add(s);else{let t=e.props[s],r=a[s]||new Set;("name"!==s||!i)&&r.has(t)?l=!1:(r.add(t),a[s]=r)}}}return l})).reverse().map((e,t)=>{let s=e.key||t;return d.default.cloneElement(e,{key:s})})}let p=function({children:e}){let t=(0,d.useContext)(c.HeadManagerContext);return(0,n.jsx)(o.default,{reduceComponentsToState:x,headManager:t,children:e})};("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},18556,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"ImageConfigContext",{enumerable:!0,get:function(){return l}});let r=e.r(55682)._(e.r(71645)),a=e.r(87690),l=r.default.createContext(a.imageConfigDefault)},65856,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"RouterContext",{enumerable:!0,get:function(){return r}});let r=e.r(55682)._(e.r(71645)).default.createContext(null)},70965,(e,t,s)=>{"use strict";function r(e,t){let s=e||75;return t?.qualities?.length?t.qualities.reduce((e,t)=>Math.abs(t-s)<Math.abs(e-s)?t:e,0):s}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"findClosestQuality",{enumerable:!0,get:function(){return r}})},1948,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let r=e.r(70965);function a({config:e,src:t,width:s,quality:a}){if(t.startsWith("/")&&t.includes("?")&&e.localPatterns?.length===1&&"**"===e.localPatterns[0].pathname&&""===e.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${t}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let l=(0,r.findClosestQuality)(a,e);return`${e.path}?url=${encodeURIComponent(t)}&w=${s}&q=${l}${t.startsWith("/_next/static/media/"),""}`}a.__next_img_default=!0;let l=a},18581,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"useMergedRef",{enumerable:!0,get:function(){return a}});let r=e.r(71645);function a(e,t){let s=(0,r.useRef)(null),a=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=s.current;e&&(s.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(s.current=l(e,r)),t&&(a.current=l(t,r))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let s=e(t);return"function"==typeof s?s:()=>e(null)}}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},5500,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"Image",{enumerable:!0,get:function(){return v}});let r=e.r(55682),a=e.r(90809),l=e.r(43476),i=a._(e.r(71645)),n=r._(e.r(74080)),d=r._(e.r(25633)),o=e.r(8927),c=e.r(87690),u=e.r(18556);e.r(33525);let h=e.r(65856),m=r._(e.r(1948)),x=e.r(18581),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function f(e,t,s,r,a,l,i){let n=e?.src;e&&e["data-loaded-src"]!==n&&(e["data-loaded-src"]=n,("decode"in e?e.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(e.parentElement&&e.isConnected){if("empty"!==t&&a(!0),s?.current){let t=new Event("load");Object.defineProperty(t,"target",{writable:!1,value:e});let r=!1,a=!1;s.current({...t,nativeEvent:t,currentTarget:e,target:e,isDefaultPrevented:()=>r,isPropagationStopped:()=>a,persist:()=>{},preventDefault:()=>{r=!0,t.preventDefault()},stopPropagation:()=>{a=!0,t.stopPropagation()}})}r?.current&&r.current(e)}}))}function b(e){return i.use?{fetchPriority:e}:{fetchpriority:e}}"undefined"==typeof window&&(globalThis.__NEXT_IMAGE_IMPORTED=!0);let g=(0,i.forwardRef)(({src:e,srcSet:t,sizes:s,height:r,width:a,decoding:n,className:d,style:o,fetchPriority:c,placeholder:u,loading:h,unoptimized:m,fill:p,onLoadRef:g,onLoadingCompleteRef:w,setBlurComplete:v,setShowAltText:j,sizesInput:y,onLoad:N,onError:k,...S},_)=>{let C=(0,i.useCallback)(e=>{e&&(k&&(e.src=e.src),e.complete&&f(e,u,g,w,v,m,y))},[e,u,g,w,v,k,m,y]),$=(0,x.useMergedRef)(_,C);return(0,l.jsx)("img",{...S,...b(c),loading:h,width:a,height:r,decoding:n,"data-nimg":p?"fill":"1",className:d,style:o,sizes:s,srcSet:t,src:e,ref:$,onLoad:e=>{f(e.currentTarget,u,g,w,v,m,y)},onError:e=>{j(!0),"empty"!==u&&v(!0),k&&k(e)}})});function w({isAppRouter:e,imgAttributes:t}){let s={as:"image",imageSrcSet:t.srcSet,imageSizes:t.sizes,crossOrigin:t.crossOrigin,referrerPolicy:t.referrerPolicy,...b(t.fetchPriority)};return e&&n.default.preload?(n.default.preload(t.src,s),null):(0,l.jsx)(d.default,{children:(0,l.jsx)("link",{rel:"preload",href:t.srcSet?void 0:t.src,...s},"__nimg-"+t.src+t.srcSet+t.sizes)})}let v=(0,i.forwardRef)((e,t)=>{let s=(0,i.useContext)(h.RouterContext),r=(0,i.useContext)(u.ImageConfigContext),a=(0,i.useMemo)(()=>{let e=p||r||c.imageConfigDefault,t=[...e.deviceSizes,...e.imageSizes].sort((e,t)=>e-t),s=e.deviceSizes.sort((e,t)=>e-t),a=e.qualities?.sort((e,t)=>e-t);return{...e,allSizes:t,deviceSizes:s,qualities:a,localPatterns:"undefined"==typeof window?r?.localPatterns:e.localPatterns}},[r]),{onLoad:n,onLoadingComplete:d}=e,x=(0,i.useRef)(n);(0,i.useEffect)(()=>{x.current=n},[n]);let f=(0,i.useRef)(d);(0,i.useEffect)(()=>{f.current=d},[d]);let[b,v]=(0,i.useState)(!1),[j,y]=(0,i.useState)(!1),{props:N,meta:k}=(0,o.getImgProps)(e,{defaultLoader:m.default,imgConf:a,blurComplete:b,showAltText:j});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(g,{...N,unoptimized:k.unoptimized,placeholder:k.placeholder,fill:k.fill,onLoadRef:x,onLoadingCompleteRef:f,setBlurComplete:v,setShowAltText:y,sizesInput:e.sizes,ref:t}),k.preload?(0,l.jsx)(w,{isAppRouter:!s,imgAttributes:N}):null]})});("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},94909,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r={default:function(){return c},getImageProps:function(){return o}};for(var a in r)Object.defineProperty(s,a,{enumerable:!0,get:r[a]});let l=e.r(55682),i=e.r(8927),n=e.r(5500),d=l._(e.r(1948));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:d.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image/",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let c=n.Image},57688,(e,t,s)=>{t.exports=e.r(94909)},16015,(e,t,s)=>{},98547,(e,t,s)=>{var r=e.i(47167);e.r(16015);var a=e.r(71645),l=a&&"object"==typeof a&&"default"in a?a:{default:a},i=void 0!==r.default&&r.default.env&&!0,n=function(e){return"[object String]"===Object.prototype.toString.call(e)},d=function(){function e(e){var t=void 0===e?{}:e,s=t.name,r=void 0===s?"stylesheet":s,a=t.optimizeForSpeed,l=void 0===a?i:a;o(n(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",o("boolean"==typeof l,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=l,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var d="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=d?d.getAttribute("content"):null}var t,s=e.prototype;return s.setOptimizeForSpeed=function(e){o("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),o(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},s.isOptimizeForSpeed=function(){return this._optimizeForSpeed},s.inject=function(){var e=this;if(o(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},s.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},s.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},s.insertRule=function(e,t){if(o(n(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},s.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(r){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];o(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},s.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];o(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},s.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},s.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},s.makeStyleTag=function(e,t,s){t&&o(n(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var a=document.head||document.getElementsByTagName("head")[0];return s?a.insertBefore(r,s):a.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var s=0;s<t.length;s++){var r=t[s];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function o(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},u={};function h(e,t){if(!t)return"jsx-"+e;var s=String(t),r=e+s;return u[r]||(u[r]="jsx-"+c(e+"-"+s)),u[r]}function m(e,t){"undefined"==typeof window&&(t=t.replace(/\/style/gi,"\\/style"));var s=e+t;return u[s]||(u[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),u[s]}var x=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,r=void 0===s?null:s,a=t.optimizeForSpeed,l=void 0!==a&&a;this._sheet=r||new d({name:"styled-jsx",optimizeForSpeed:l}),this._sheet.inject(),r&&"boolean"==typeof l&&(this._sheet.setOptimizeForSpeed(l),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),r=s.styleId,a=s.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var l=a.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=l,this._instancesCounts[r]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var r=this._fromServer&&this._fromServer[s];r?(r.parentNode.removeChild(r),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],r=e[1];return l.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,r=e.id;if(s){var a=h(r,s);return{styleId:a,rules:Array.isArray(t)?t.map(function(e){return m(a,e)}):[m(a,t)]}}return{styleId:h(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),p=a.createContext(null);function f(){return new x}function b(){return a.useContext(p)}p.displayName="StyleSheetContext";var g=l.default.useInsertionEffect||l.default.useLayoutEffect,w="undefined"!=typeof window?f():void 0;function v(e){var t=w||b();return t&&("undefined"==typeof window?t.add(e):g(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}v.dynamic=function(e){return e.map(function(e){return h(e[0],e[1])}).join(" ")},s.StyleRegistry=function(e){var t=e.registry,s=e.children,r=a.useContext(p),i=a.useState(function(){return r||t||f()})[0];return l.default.createElement(p.Provider,{value:i},s)},s.createStyleRegistry=f,s.style=v,s.useStyleRegistry=b},37902,(e,t,s)=>{t.exports=e.r(98547).style},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(57688);let a=[{label:"A",value:1,order:1},{label:"2",value:2,order:2},{label:"3",value:3,order:3},{label:"4",value:4,order:4},{label:"5",value:5,order:5},{label:"6",value:6,order:6},{label:"7",value:7,order:7},{label:"8",value:8,order:8},{label:"9",value:9,order:9},{label:"10",value:10,order:10},{label:"J",value:10,order:11},{label:"Q",value:10,order:12},{label:"K",value:10,order:13}],l=["♠","♥","♦","♣"],i={"♠":{name:"Spades",slug:"spades",color:"text-slate-200"},"♥":{name:"Hearts",slug:"hearts",color:"text-red-200"},"♦":{name:"Diamonds",slug:"diamonds",color:"text-rose-200"},"♣":{name:"Clubs",slug:"clubs",color:"text-emerald-200"}},n={"♠":0,"♥":1,"♦":2,"♣":3},d=a.flatMap(e=>l.map(t=>({rank:e.label,value:e.value,order:e.order,suit:t,id:`${e.label}${t}`})));function o(e){return`${e.rank}${e.suit}`}let c={A:"ace",J:"jack",Q:"queen",K:"king",10:"10",9:"9",8:"8",7:"7",6:"6",5:"5",4:"4",3:"3",2:"2"};function u(e,t){let s=i[e.suit].slug,r=c[e.rank]??e.rank.toLowerCase(),a=["J","Q","K"].includes(e.rank);return`./cards/${r}_of_${s}${a&&"original"===t?"2":""}.svg`}function h(e){let t,s,r=(t=[],s=[],!function r(a){s.length&&t.push([...s]);for(let t=a;t<e.length;t+=1)s.push(e[t]),r(t+1),s.pop()}(0),t),a=[];return r.forEach(e=>{15===e.reduce((e,t)=>e+t.value,0)&&e.length>=2&&a.push(`${e.map(o).join(" + ")} = 15`)}),{label:"Fifteens",points:2*a.length,detail:a.length?a.map(e=>`${e} (2 pts)`):["No combinations totaled 15."]}}function m(e){let t=e.reduce((e,t)=>(e[t.rank]=(e[t.rank]??0)+1,e),{}),s=[],r=0;return Object.entries(t).forEach(([e,t])=>{if(t>=2){let a=t*(t-1)/2,l=2===t?"Pair":`${t} of a kind`;s.push(`${l} of ${e}s → ${2*a} pts`),r+=2*a}}),s.length||s.push("No pairs."),{label:"Pairs",points:r,detail:s}}function x(e){let t=e.reduce((e,t)=>(e[t.order]=(e[t.order]??0)+1,e),{}),s=0,r=0,l=[],i=1;for(;i<=13;){if(!t[i]){i+=1;continue}let e=i,n=1;for(;t[e];)n*=t[e],e+=1;let d=e-i;if(d>=3){let e=Array.from({length:d},(e,t)=>i+t).map(e=>{let t=a.find(t=>t.order===e);return t?.label??e.toString()}).join("-"),t=d*n;d>s?(s=d,r=t,l.length=0,l.push(`Run of ${d} (${e}) \xd7${n} = ${t} pts`)):d===s&&(r+=t,l.push(`Run of ${d} (${e}) \xd7${n} = ${t} pts`))}i=e+1}return l.length||l.push("No runs (need 3+ consecutive ranks)."),{label:"Runs",points:r,detail:l}}function p(e,t){let s,r=[...e,t],a=[h(r),m(r),x(r),function(e,t){if(!e.every(t=>t.suit===e[0].suit))return{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]};let s=t.suit===e[0].suit;return{label:"Flush",points:s?5:4,detail:[s?"5-card flush (hand + starter) = 5 pts":"4-card flush (hand only) = 4 pts"]}}(e,t),{label:"His Nobs",points:+!!(s=e.find(e=>"J"===e.rank&&e.suit===t.suit)),detail:s?[`Jack of ${t.suit} in hand matches starter suit = 1 pt`]:["No matching Jack for starter suit."]}];return{total:a.reduce((e,t)=>e+t.points,0),parts:a}}function f(e,t){if(!t.length)return{average:0,best:[]};let s=t.map(t=>({card:t,score:p(e,t).total})),r=s.reduce((e,t)=>e+t.score,0),a=[...s].sort((e,t)=>t.score-e.score),l=[],i=new Set;for(let e of a){if(i.size>=3&&!i.has(e.score))break;l.push(e),i.add(e.score)}return{average:r/s.length,best:l}}function b(e){let t=new Map;return e.forEach(({card:e,score:s})=>{let r=t.get(s)??[];r.push(e),t.set(s,r)}),Array.from(t.entries()).sort((e,t)=>t[0]-e[0]).map(([e,t])=>({score:e,cards:v(t)}))}function g(e,t,s){if(!t.length)return 0;let r=0,a=0;for(let l=0;l<t.length;l+=1){let i=t[l];for(let n=l+1;n<t.length;n+=1){let d=t[n];if(s||"5"!==i.rank&&"5"!==d.rank&&i.rank!==d.rank)for(let s=0;s<t.length;s+=1)s!==l&&s!==n&&(r+=p([...e,i,d],t[s]).total,a+=1)}}return a?r/a:0}function w(e,t,s){let r,a;if(6!==e.length)return[];let l=d.filter(t=>!e.some(e=>e.id===t.id));return(r=[],a=[],!function t(s,l){if(4===l)return void r.push([...a]);for(let r=s;r<e.length;r+=1)a.push(e[r]),t(r+1,l+1),a.pop()}(0,0),r).map(r=>{let a=e.filter(e=>!r.some(t=>t.id===e.id)),{average:i,best:n}=f(r,l),d=s?g(a,l,t):0,o=l.length?Math.min(...l.map(e=>p(r,e).total)):0,c=s?t?i+d:i-d:i;return{keep:r,discards:a,handAverage:i,cribAverage:d,expectedValue:c,bestStarters:n,minHandScore:o}}).sort((e,t)=>t.expectedValue-e.expectedValue).slice(0,3)}function v(e){return[...e].sort((e,t)=>e.order!==t.order?e.order-t.order:n[e.suit]-n[t.suit])}function j({cardsBySuit:e,hand:s,starter:a,note:l,faceStyle:i,faceStyleToggle:n,selectedIds:d,handleToggleCountCard:c,handOnlyBreakdown:h,breakdown:m,slotsFilled:x,picksRef:p}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Full deck"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[d.size,"/5 selected"]})]}),n]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:l})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:l.map(e=>{let l=s.some(t=>t.id===e.id),n=a?.id===e.id,d=l||n;return(0,t.jsxs)("button",{onClick:()=>c(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${d?"border-lime-200 ring-2 ring-lime-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(e,i),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsxs)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:[l&&(0,t.jsx)("span",{className:"rounded-full bg-emerald-500/90 px-2 py-0.5 text-white shadow",children:"Hand"}),n&&(0,t.jsx)("span",{className:"rounded-full bg-amber-400/90 px-2 py-0.5 text-amber-950 shadow",children:"Starter"}),!d&&(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})]})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your picks"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click a card to add it. Click again to remove. The first 4 go to your hand, then the starter."})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-emerald-400/30 bg-emerald-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-emerald-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-emerald-400"}),"Hand"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 rounded-full border border-amber-400/30 bg-amber-500/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-amber-200",children:[(0,t.jsx)("span",{className:"h-2 w-2 rounded-full bg-amber-400"}),"Starter"]})]})]}),(0,t.jsxs)("div",{ref:p,className:"mt-4 grid grid-cols-4 gap-1 sm:grid-cols-5",children:[Array.from({length:4}).map((e,a)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[a]&&c(s[a]),className:"rounded-xl border border-emerald-300/20 bg-emerald-500/10 px-2 py-2 text-center text-sm text-emerald-100 shadow-inner shadow-emerald-900/50 transition hover:border-emerald-200/60 hover:shadow-lg hover:shadow-emerald-900/40 disabled:cursor-default",disabled:!s[a],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:["Hand ",a+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-emerald-200/40 bg-white/90 shadow",children:s[a]?(0,t.jsx)(r.default,{src:u(s[a],i),alt:o(s[a]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-emerald-200",children:"—"})})})]},`hand-${a}`)),(0,t.jsxs)("button",{type:"button",onClick:()=>a&&c(a),className:"rounded-xl border border-amber-300/30 bg-amber-500/10 px-3 py-4 text-center text-sm text-amber-100 shadow-inner shadow-amber-900/40 transition hover:border-amber-200/60 hover:shadow-lg hover:shadow-amber-900/30 disabled:cursor-default",disabled:!a,children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-amber-200",children:"Starter"}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-amber-200/40 bg-white/90 shadow",children:a?(0,t.jsx)(r.default,{src:u(a,i),alt:o(a),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-amber-200",children:"—"})})})]})]}),l&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:l})]})}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-lime-300/20 bg-lime-500/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Score"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Totals refresh as soon as you finish the hand."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-300",children:"Total"}),(0,t.jsx)("div",{className:"text-4xl font-black text-lime-200",children:m?m.total:"—"}),!x&&h&&(0,t.jsxs)("div",{className:"mt-1 text-xs text-slate-200",children:["Hand only (no starter):"," ",(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.total," pts"]})]})]})]}),!x&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:h?"Pick a starter to see the full breakdown. Hand-only score shown below.":"Pick 4 hand cards and 1 starter to see the breakdown."}),m&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:m.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},e.label))}),!m&&h&&(0,t.jsx)("div",{className:"mt-4 space-y-3",children:h.parts.map(e=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 px-3 py-3",children:[(0,t.jsxs)("div",{className:"mb-1 flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-white",children:e.label}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-lime-200",children:[e.points," pts"]})]}),(0,t.jsx)("ul",{className:"space-y-1 text-sm text-slate-200",children:e.detail.map((e,s)=>(0,t.jsxs)("li",{className:"flex gap-2",children:[(0,t.jsx)("span",{className:"mt-1 h-1.5 w-1.5 rounded-full bg-white/70"}),(0,t.jsx)("span",{children:e})]},s))})]},`hand-only-${e.label}`))})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200 shadow-lg shadow-black/40",children:[(0,t.jsx)("h3",{className:"text-base font-semibold text-white",children:"How scoring works"}),(0,t.jsxs)("ul",{className:"mt-2 space-y-1",children:[(0,t.jsx)("li",{children:"• Fifteens: every unique combo totaling 15 is worth 2."}),(0,t.jsx)("li",{children:"• Pairs: each pair scores 2 (pairs of a kind stack)."}),(0,t.jsx)("li",{children:"• Runs: longest run of 3+ in the hand; duplicates multiply runs."}),(0,t.jsx)("li",{children:"• Flush: 4 hand cards same suit = 4; starter match makes 5."}),(0,t.jsx)("li",{children:"• His Nobs: Jack in hand matching the starter suit = 1."})]})]})]})]})]})}function y({cardsBySuit:e,discardPick:s,discardNote:a,discardSelectedIds:l,handleToggleDiscardCard:i,faceStyle:d,faceStyleToggle:c,isDealer:h,includeCrib:m,onDealerChange:x,onIncludeCribChange:p,discardSuggestions:f,discardLoading:g,onStarterPick:w}){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Pick any 6 cards"}),(0,t.jsxs)("p",{className:"text-xs text-slate-300",children:[l.size,"/6 selected"]})]}),c]}),(0,t.jsx)("div",{className:"grid grid-cols-4 gap-1 sm:grid-cols-4 lg:grid-cols-1",children:e.map(({suit:e,cards:s})=>(0,t.jsx)("div",{children:(0,t.jsx)("div",{className:"grid grid-cols-1 gap-1 lg:grid-cols-13",children:s.map(e=>{let s=l.has(e.id);return(0,t.jsxs)("button",{onClick:()=>i(e),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${s?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(e,d),alt:o(e),fill:!0,sizes:"(min-width:1024px) 90px, (min-width:640px) 16vw, 22vw",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:s?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Picked"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Add"})})]},e.id)})})},e))})]}),(0,t.jsxs)("section",{className:"mt-6 space-y-6",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Your six-card hand"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Click to add, click again to remove. We will try every possible discard to find the best expected value."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>x(!0),className:`px-3 py-1.5 transition ${h?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>x(!1),className:`px-3 py-1.5 transition ${!h?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:m,onChange:e=>p(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:Array.from({length:6}).map((e,a)=>(0,t.jsxs)("button",{type:"button",onClick:()=>s[a]&&i(s[a]),className:"rounded-xl border border-sky-300/30 bg-sky-500/10 px-2 py-2 text-center text-sm text-sky-100 shadow-inner shadow-sky-900/40 transition hover:border-sky-200/60 hover:shadow-lg hover:shadow-sky-900/40 disabled:cursor-default",disabled:!s[a],children:[(0,t.jsxs)("div",{className:"text-xs uppercase tracking-wide text-sky-200",children:["Card ",a+1]}),(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg border border-sky-200/40 bg-white/90 shadow",children:s[a]?(0,t.jsx)(r.default,{src:u(s[a],d),alt:o(s[a]),fill:!0,sizes:"120px",className:"object-contain p-1",priority:!0}):(0,t.jsx)("div",{className:"flex h-full items-center justify-center text-lg font-semibold text-sky-200",children:"—"})})})]},`discard-${a}`))}),a&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:a})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Discard suggestions"}),(0,t.jsxs)("p",{className:"text-sm text-slate-300",children:["We average every possible starter from the unseen cards.",m?h?" Expected value = hand average + crib average.":" Expected value = hand average - crib average.":" Crib is ignored when computing the average."]})]}),(0,t.jsx)("div",{className:"text-xs text-slate-300",children:"Crib assumption: when you are non-dealer, you avoid throwing 5s or pairs."})]}),s.length<6&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Pick 6 cards to see the best discard lines."}),6===s.length&&(0,t.jsxs)("div",{className:"mt-4 space-y-4",children:[g&&(0,t.jsx)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best discard lines..."]})}),!g&&f.map((e,s)=>(0,t.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4 shadow-inner shadow-black/30",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("span",{className:"rounded-full bg-sky-500/20 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-sky-100",children:["#",s+1]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-slate-200",children:"Keep the four below, discard the two to the crib."}),(0,t.jsx)("p",{className:"text-xs text-slate-400",children:"Best starters highlight spikes you can hope to cut."})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:e.expectedValue.toFixed(2)}),m&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",e.handAverage.toFixed(2)," / Crib"," ",e.cribAverage.toFixed(2)]})]})]}),(0,t.jsxs)("div",{className:"mt-3 grid gap-3 md:grid-cols-[1.2fr,0.8fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.keep.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard to crib"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:e.discards.map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.handAverage.toFixed(2)," pts"]})]}),m&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[e.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for this keep:"}),(0,t.jsx)("div",{className:"mt-3 space-y-3",children:b(e.bestStarters).map(({cards:s,score:r})=>{let a,l=(a=new Map,s.forEach(e=>{let t=a.get(e.rank);t?t.suits.add(e.suit):a.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(a.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>n[e]-n[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")}))).map(({rank:e,suits:t})=>{let r=[...t].sort((e,t)=>n[e]-n[t]),a=s.filter(t=>t.rank===e).sort((e,t)=>n[e.suit]-n[t.suit]||e.order-t.order)[0]??s[0];return{rank:e,suits:r,starterCard:a}});return(0,t.jsx)("div",{className:"flex flex-col gap-2 rounded-xl border border-sky-200/30 py-1 px-2 shadow-sm shadow-sky-900/30",children:(0,t.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:l.map(({rank:s,suits:a,starterCard:l})=>(0,t.jsx)("button",{type:"button",onClick:()=>l&&w(e.keep,l),className:"inline-flex items-center gap-2 rounded-full border border-sky-200/60 bg-sky-500/20 px-3 py-1 text-xs font-semibold text-sky-50 transition hover:-translate-y-[1px] hover:border-sky-100 hover:bg-sky-400/30 hover:shadow-sky-500/30",children:(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:s}),(0,t.jsx)("span",{className:"flex items-center gap-0.5 text-[11px]",children:a.map(e=>(0,t.jsx)("span",{className:"rounded bg-sky-400/40 px-1 py-[1px]",children:e},`${s}-${e}`))})]})},`starter-${r}-${s}-${l.id}`))}),(0,t.jsx)("div",{className:"text-right",children:(0,t.jsxs)("div",{className:"text-lg font-bold text-sky-50",children:[r," pts"]})})]})},`starter-block-${r}-${s.map(e=>e.id).join("-")}`)})})]})]})]},e.keep.map(e=>e.id).join("-")))]})]})]})]})}function N({faceStyle:e,onChange:s}){return(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 text-xs",children:[(0,t.jsx)("span",{className:"text-slate-300",children:"Face style"}),(0,t.jsx)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10",children:["simple","original"].map(r=>(0,t.jsx)("button",{onClick:()=>s(r),className:`px-3 py-1 font-semibold transition ${e===r?"bg-white/20 text-white":"text-slate-200 hover:bg-white/10"}`,children:"simple"===r?"Simple":"Original"},r))})]})}var k=e.i(37902),S=e.i(74080);let _="cribbage-board-state",C=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,20,21,22,23,24,28,29],$=["clear","classic","bar"],R=["red","green","blue","yellow","pink","purple"],E={red:{peg:"bg-red-400",text:"text-red-200",border:"border-red-400/40",button:"bg-red-500/20 hover:bg-red-500/30",historyBg:"bg-red-500/10"},green:{peg:"bg-emerald-400",text:"text-emerald-200",border:"border-emerald-400/40",button:"bg-emerald-500/20 hover:bg-emerald-500/30",historyBg:"bg-emerald-500/10"},blue:{peg:"bg-sky-400",text:"text-sky-200",border:"border-sky-400/40",button:"bg-sky-500/20 hover:bg-sky-500/30",historyBg:"bg-sky-500/10"},yellow:{peg:"bg-amber-400",text:"text-amber-200",border:"border-amber-400/40",button:"bg-amber-500/20 hover:bg-amber-500/30",historyBg:"bg-amber-500/10"},pink:{peg:"bg-pink-400",text:"text-pink-200",border:"border-pink-400/40",button:"bg-pink-500/20 hover:bg-pink-500/30",historyBg:"bg-pink-500/10"},purple:{peg:"bg-violet-400",text:"text-violet-200",border:"border-violet-400/40",button:"bg-violet-500/20 hover:bg-violet-500/30",historyBg:"bg-violet-500/10"}},P=e=>"p1"===e?"red":"p2"===e?"green":"blue",F=()=>[{id:"p1",name:"Player 1",color:P("p1"),score:0,backPegScore:-1},{id:"p2",name:"Player 2",color:P("p2"),score:0,backPegScore:-1}],O=e=>{let t=F();return 3===e?[...t,{id:"p3",name:"Player 3",color:P("p3"),score:0,backPegScore:-1}]:t},I=[-5,5],M=e=>Math.min(Math.max(e,2),98),z=e=>12+76*e/2,A=e=>6+88*e/39;function T({onRegisterReset:e}){let[r,a]=(0,s.useState)(2),[l,i]=(0,s.useState)(()=>F()),[n,d]=(0,s.useState)([]),[o,c]=(0,s.useState)(-1),[u,h]=(0,s.useState)("clear"),[m,x]=(0,s.useState)(!0),[p,f]=(0,s.useState)(null),[b,g]=(0,s.useState)(!1),w=(0,s.useRef)(null),v=(0,s.useRef)(o),j=(0,s.useRef)(!1),y=(0,s.useRef)(n),N=(0,s.useRef)(l),P=(0,s.useRef)(null),T=(0,s.useRef)([]),[D,B]=(0,s.useState)(0),[H,L]=(0,s.useState)([]),q=(0,s.useRef)(new Map),[U,V]=(0,s.useState)(!1),Y=(0,s.useRef)(!1),J=(0,s.useRef)(null),W=(0,s.useMemo)(()=>[-1,...Array.from({length:122},(e,t)=>t)],[]),K=(0,s.useMemo)(()=>W.map(e=>({score:e,pos:((e,t=0)=>{if(e<=0)return{left:4,top:M(z(0)+I[e<=-1?0:1]+t)};let s=Math.min(e,121);if(s>=121){let e=A(39)+2,s=z(2)+t;return{left:M(e),top:M(s)}}let r=s-1,a=Math.floor(r/40),l=r%40,i=A(a%2==1?39-l:l),n=z(a)+t;return{left:M(i),top:M(n)}})(e)})),[W]),G=3===r?3:2,X=l.find(e=>e.score>=121)??null;(0,s.useEffect)(()=>{v.current=o},[o]),(0,s.useEffect)(()=>{y.current=n},[n]),(0,s.useEffect)(()=>{N.current=l},[l]),(0,s.useEffect)(()=>()=>{q.current.forEach(e=>window.clearTimeout(e)),q.current.clear()},[]),(0,s.useEffect)(()=>{V(!0)},[]),(0,s.useEffect)(()=>(document.body.classList.toggle("board-compact",b),()=>{document.body.classList.remove("board-compact")}),[b]),(0,s.useEffect)(()=>{let e=!0,t=async()=>{if("wakeLock"in navigator)try{let t=await navigator.wakeLock.request("screen");if(!e)return void await t.release();J.current=t,t.addEventListener("release",()=>{J.current===t&&(J.current=null)})}catch{}};t();let s=()=>{"visible"!==document.visibilityState||J.current||t()};return document.addEventListener("visibilitychange",s),()=>{e=!1,document.removeEventListener("visibilitychange",s),J.current?.release(),J.current=null}},[]);let Q=(0,s.useCallback)((e,t)=>{let s=`${Date.now()}-${Math.random().toString(16).slice(2)}`;L(r=>[...r,{id:s,message:e,bgClass:t}]);let r=window.setTimeout(()=>{L(e=>e.filter(e=>e.id!==s)),q.current.delete(s)},2400);q.current.set(s,r)},[]),Z=(0,s.useCallback)((e,t,s)=>{let r=new Map;s.forEach(e=>{r.set(e.id,{...e,score:0,backPegScore:-1})});for(let s=0;s<=t;s+=1){let t=e[s];if(!t)continue;let a=r.get(t.playerId);a&&(a.backPegScore=t.oldScore,a.score=t.newScore)}return Array.from(r.values())},[]),ee=(0,s.useCallback)((e,t)=>{if(t<=0)return;let s=N.current;if(s.find(e=>e.score>=121))return;let r=s.find(t=>t.id===e);if(!r)return;let a=Math.min(121,r.score+t),l=s.some(t=>t.id!==e&&121===t.score);121===a&&l&&(a=120);let n={id:`${Date.now()}-${Math.random().toString(16).slice(2)}`,playerId:e,playerName:r.name,scoreToAdd:t,oldScore:r.score,oldBackPegScore:r.backPegScore,newScore:a,timestamp:Date.now()};P.current="add";let o=E[r.color];Q(`${r.name} +${t}`,o.historyBg),d(e=>[...e.slice(0,v.current+1),n]),c(e=>{let t=e+1;return v.current=t,t});let u=s.map(t=>t.id===e?{...t,score:a,backPegScore:t.score}:t);N.current=u,i(u)},[]),et=(0,s.useCallback)(()=>{if("remove"===P.current&&T.current.length>0){let e=T.current.pop();if(!e)return;let t=[...y.current],s=Math.min(Math.max(e.index,0),t.length);t.splice(s,0,e.entry),y.current=t,d(t),v.current=e.prevIndex,c(e.prevIndex);let r=Z(t,e.prevIndex,N.current);N.current=r,i(r),B(T.current.length),P.current=null;return}let e=v.current;if(e<0)return;let t=y.current[e];if(!t)return;i(e=>e.map(e=>e.id===t.playerId?{...e,score:t.oldScore,backPegScore:t.oldBackPegScore}:e));let s=e-1;v.current=s,c(s)},[]),es=(0,s.useCallback)(()=>{let e=v.current+1,t=y.current[e];t&&(i(e=>e.map(e=>e.id===t.playerId?{...e,score:t.newScore,backPegScore:t.oldScore}:e)),v.current=e,c(e))},[]),er=(0,s.useCallback)(e=>{let t=e??G,s=((e=2)=>({players:O(e),history:[],currentIndex:-1,boardSkin:"clear",playerCount:e}))(t);a(t),i(s.players),d(s.history),c(s.currentIndex),h(s.boardSkin),T.current=[],B(0);try{localStorage.removeItem(_)}catch{}},[G]),ea=(0,s.useCallback)((e,t)=>{i(s=>s.some(s=>s.id!==e&&s.color===t)?s:s.map(s=>s.id===e?{...s,color:t}:s))},[]),el=(0,s.useCallback)((e,t)=>{i(s=>s.map(s=>s.id===e?{...s,name:t}:s)),d(s=>s.map(s=>s.playerId===e?{...s,playerName:t}:s))},[]),ei=(0,s.useCallback)((e,t)=>{let s,r=(s=t.trim()).length?s:"p1"===e?"Player 1":"p2"===e?"Player 2":"Player 3";i(t=>t.map(t=>t.id===e?{...t,name:r}:t)),d(t=>t.map(t=>t.playerId===e?{...t,playerName:r}:t))},[]),en=(0,s.useCallback)(()=>{try{let e={players:l,history:n,currentIndex:o,boardSkin:u,playerCount:r,showHistory:m,removedEntries:T.current};localStorage.setItem(_,JSON.stringify(e))}catch{}},[u,o,n,r,l,m]);(0,s.useEffect)(()=>{e(()=>er())},[e,er]),(0,s.useEffect)(()=>{try{let e=localStorage.getItem(_);if(e){let t=JSON.parse(e);if(t){Y.current=!0;let e=3===t.playerCount?3:2;a(e);let s=O(e),r=t.players?s.map(e=>{let s=t.players?.find(t=>t.id===e.id);return s?{...e,name:s.name??e.name,color:s.color??e.color}:e}):s,l=new Set(r.map(e=>e.id)),n=t.history?.filter(e=>l.has(e.playerId))??[];i(r),d(n),c("number"==typeof t.currentIndex?t.currentIndex:-1),"boolean"==typeof t.showHistory&&x(t.showHistory),t.removedEntries&&Array.isArray(t.removedEntries)&&(T.current=t.removedEntries,B(t.removedEntries.length)),t.boardSkin&&$.includes(t.boardSkin)&&h(t.boardSkin)}}}catch{}finally{j.current=!0}},[]),(0,s.useEffect)(()=>{if(j.current){if(Y.current){Y.current=!1;return}en()}},[en]),(0,s.useEffect)(()=>{if(!p)return;let e=e=>{f(null);let t=l.find(e=>e.id===p);if(!t||!w.current)return;let s=w.current.getBoundingClientRect(),r=e.clientX-s.left,a=e.clientY-s.top,i=t.score,n=1/0;K.forEach(e=>{let t=e.pos.left/100*s.width,l=e.pos.top/100*s.height,d=t-r,o=l-a,c=d*d+o*o;c<n&&(n=c,i=e.score)});let d=Math.min(Math.max(i,-1),121);d>t.score&&ee(t.id,d-t.score)};return window.addEventListener("pointerup",e,{once:!0}),window.addEventListener("pointercancel",e,{once:!0}),()=>{window.removeEventListener("pointerup",e),window.removeEventListener("pointercancel",e)}},[ee,p,l,K]);let ed=(0,s.useCallback)(()=>{g(e=>!e)},[]);return(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 "+((b?"p-2":"p-0")||""),children:[b?null:(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex flex-wrap items-start justify-between gap-2",children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798",children:[(0,t.jsx)("h2",{className:"jsx-360a59b15ca86798 text-2xl font-semibold text-white",children:"Online Cribbage Board"}),(0,t.jsx)("p",{className:"jsx-360a59b15ca86798 mt-2 text-sm text-slate-300",children:"Move pegs by dragging the trailing peg or tapping a score button. Every move is logged for undo and redo."})]}),(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 flex flex-wrap items-center gap-2",children:(0,t.jsx)("button",{type:"button",onClick:()=>er(),className:"jsx-360a59b15ca86798 rounded-full border border-white/15 bg-white/10 px-4 py-2 text-xs font-semibold uppercase tracking-wide text-white hover:bg-white/20",children:"New game"})})]}),b?null:(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 mt-4 rounded-xl border border-white/10 bg-white/5 px-4 py-3 text-sm text-slate-200",children:[(0,t.jsx)("span",{className:"jsx-360a59b15ca86798 font-semibold text-emerald-300",children:"Undo/Redo:"})," Use the buttons in the history panel.",(0,t.jsx)("br",{className:"jsx-360a59b15ca86798"}),(0,t.jsx)("span",{className:"jsx-360a59b15ca86798 font-semibold text-emerald-300",children:"Edit Names:"})," Click a name to rename."]}),(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 "+((b?"mt-0 space-y-3":"mt-5 space-y-5")||""),children:(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 "+((b?"flex gap-3":"flex gap-2")||""),children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex flex-col grow gap-2",children:[(0,t.jsxs)("div",{className:`jsx-360a59b15ca86798 rounded-2xl border border-white/10 bg-white/5 shadow-inner ${b?"p-3":"p-4"}`,children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex flex-wrap items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"jsx-360a59b15ca86798",children:(0,t.jsx)("p",{className:"jsx-360a59b15ca86798 text-xs uppercase tracking-[0.3em] text-slate-400",children:"Board"})}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex flex-wrap items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>x(e=>!e),className:"jsx-360a59b15ca86798 rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-xs font-semibold text-white hover:bg-white/20",children:m?"Hide history":"Show history"}),(0,t.jsx)("button",{type:"button",onClick:ed,className:"jsx-360a59b15ca86798 rounded-full border border-white/15 bg-white/10 px-3 py-1.5 text-xs font-semibold text-white hover:bg-white/20",children:b?"Comfort view":"Compact"}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{type:"button",onClick:()=>er(2),className:`jsx-360a59b15ca86798 px-3 py-1.5 transition ${2===G?"bg-white/20":"hover:bg-white/10"}`,children:"2 players"}),(0,t.jsx)("button",{type:"button",onClick:()=>er(3),className:`jsx-360a59b15ca86798 px-3 py-1.5 transition ${3===G?"bg-white/20":"hover:bg-white/10"}`,children:"3 players"})]})]})]}),(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 "+((b?"mt-3 flex gap-2":"mt-4 flex gap-2")||""),children:(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 rounded-xl border border-white/10 bg-black/30 p-3 lg:order-1 w-full",children:l.map(e=>(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 mb-3 last:mb-0",children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex items-center justify-between text-xs text-slate-300",children:[(0,t.jsx)("span",{className:"jsx-360a59b15ca86798 "+(E[e.color].text||""),children:e.name}),(0,t.jsxs)("span",{className:"jsx-360a59b15ca86798",children:[e.score," pts"]})]}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 relative mt-1 h-2 rounded-full bg-white/10",children:[[0,61,91,121].map(s=>(0,t.jsx)("span",{style:{left:`${s/121*100}%`},"aria-hidden":!0,className:"jsx-360a59b15ca86798 absolute top-0 h-full w-px bg-white/15"},`${e.id}-mark-${s}`)),(0,t.jsx)("div",{style:{width:`${e.score/121*100}%`},className:`jsx-360a59b15ca86798 absolute left-0 top-0 h-full rounded-full ${E[e.color].peg}`})]})]},`bar-${e.id}`))})})]}),(0,t.jsx)("div",{className:`jsx-360a59b15ca86798 grid ${b?"gap-2":"gap-4"} ${2===G?"grid-cols-2":"grid-cols-3"}`,children:l.map(e=>(0,t.jsxs)("div",{className:`jsx-360a59b15ca86798 rounded-xl border border-white/10 bg-white/5 shadow-inner ${E[e.color].border} ${b?"p-3":"p-4"}`,children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex items-center justify-between gap-3",children:[(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 flex items-center gap-2",children:(0,t.jsx)("input",{value:e.name,onChange:t=>el(e.id,t.target.value),onBlur:t=>ei(e.id,t.target.value),className:"jsx-360a59b15ca86798 w-full bg-transparent text-lg font-semibold text-white outline-none"})}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 text-sm text-slate-300 whitespace-nowrap",children:[e.score," pts"]})]}),(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 "+((b?"mt-2 grid grid-cols-6 gap-1":"mt-3 grid grid-cols-6 gap-1")||""),children:C.map(s=>(0,t.jsxs)("button",{type:"button",onClick:()=>ee(e.id,s),disabled:!!X,className:`jsx-360a59b15ca86798 rounded-lg border border-white/10 px-1 py-1 text-xs font-semibold text-white ${E[e.color].button} disabled:cursor-not-allowed disabled:opacity-50`,children:["+",s]},`${e.id}-score-${s}`))}),(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 "+((b?"mt-2 flex items-center gap-2":"mt-3 flex items-center gap-2")||""),children:(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 flex items-center gap-1",children:R.map(s=>{let r=l.some(t=>t.id!==e.id&&t.color===s);return(0,t.jsx)("button",{type:"button",onClick:()=>ea(e.id,s),disabled:r,"aria-label":`Set ${e.name} color to ${s}`,title:s,className:`jsx-360a59b15ca86798 h-4 w-4 rounded-full border ${E[s].border} ${E[s].peg} ${e.color===s?"ring-2 ring-white/70":r?"opacity-20":"opacity-70 hover:opacity-100"}`},`${e.id}-${s}`)})})})]},`${e.id}-controls`))})]}),m?(0,t.jsxs)("div",{className:`jsx-360a59b15ca86798 rounded-xl border border-white/10 bg-white/5 shadow-inner ${b?"p-3":"p-4"}`,children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex items-center gap-2",children:[(0,t.jsx)("button",{type:"button",onClick:et,disabled:o<0&&0===D,className:"jsx-360a59b15ca86798 rounded-full border border-white/10 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white disabled:opacity-50",children:"Undo"}),(0,t.jsx)("button",{type:"button",onClick:es,disabled:o>=n.length-1,className:"jsx-360a59b15ca86798 rounded-full border border-white/10 bg-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-white disabled:opacity-50",children:"Redo"}),(0,t.jsxs)("span",{className:"jsx-360a59b15ca86798 text-xs text-slate-300 whitespace-nowrap",children:[n.length," moves"]})]}),0===n.length?(0,t.jsx)("p",{className:`jsx-360a59b15ca86798 ${b?"mt-2":"mt-3"} text-sm text-slate-300`,children:"No moves yet."}):(0,t.jsx)("ul",{className:`jsx-360a59b15ca86798 ${b?"mt-2":"mt-3"} max-h-full space-y-2 overflow-y-auto pr-1`,children:[...n].reverse().map((e,s)=>{var r;let a,u=n.length-1-s>o,h=E[l.find(t=>t.id===e.playerId)?.color??"green"];return(0,t.jsxs)("li",{className:`jsx-360a59b15ca86798 flex items-center justify-between rounded-lg border border-white/10 ${h.historyBg} px-3 py-2 text-sm text-slate-100 ${u?"opacity-50":""}`,children:[(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798",children:[(0,t.jsx)("div",{className:"jsx-360a59b15ca86798 font-semibold",children:e.playerName}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 text-xs text-slate-300 whitespace-nowrap",children:["+",e.scoreToAdd," • ",e.oldScore," → ",e.newScore," •"," ",(r=e.timestamp,a=Math.max(0,Math.floor((Date.now()-r)/1e3)),`${a}s ago`)]})]}),(0,t.jsxs)("div",{className:"jsx-360a59b15ca86798 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"jsx-360a59b15ca86798 text-xs text-slate-300",children:e.newScore>=121?"🏆":""}),(0,t.jsx)("button",{type:"button",onClick:()=>(e=>{let t=y.current,s=t.findIndex(t=>t.id===e);if(-1===s)return;let r=t[s],a=t.filter((e,t)=>t!==s),l=v.current,n=l;s<=l&&(n=l-1),T.current.push({entry:r,index:s,prevIndex:l}),P.current="remove",B(T.current.length),y.current=a,d(a),v.current=n,c(n);let o=Z(a,n,N.current);N.current=o,i(o)})(e.id),"aria-label":"Remove history entry",className:"jsx-360a59b15ca86798 flex h-6 w-6 items-center justify-center rounded-full border border-white/20 bg-white/10 text-xs text-white hover:bg-white/20",children:"×"})]})]},e.id)})})]}):null]})}),U?(0,S.createPortal)((0,t.jsx)("div",{className:"jsx-360a59b15ca86798 fixed bottom-6 right-6 z-50 flex w-64 flex-col gap-2",children:H.map(e=>(0,t.jsx)("div",{className:`jsx-360a59b15ca86798 rounded-xl border border-white/15 ${e.bgClass} px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-black/40 backdrop-blur`,children:e.message},e.id))}),document.body):null,(0,t.jsx)(k.default,{id:"360a59b15ca86798",children:"body.board-compact header{display:none}body.board-compact .max-w-6xl{padding:0}"})]})}function D(e){let s,r=(s=new Map,e.forEach(e=>{let t=s.get(e.rank);t?t.suits.add(e.suit):s.set(e.rank,{order:e.order,suits:new Set([e.suit])})}),Array.from(s.entries()).sort((e,t)=>e[1].order-t[1].order).map(([e,{suits:t}])=>({rank:e,suitString:Array.from(t).sort((e,t)=>n[e]-n[t]).join("")})).map(({rank:e,suitString:t})=>({rank:e,suits:t.split("")})));return(0,t.jsx)("span",{className:"flex flex-wrap items-center gap-1",children:r.map(({rank:e,suits:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center rounded-full bg-sky-500/20 px-1.5 py-0.5",children:[(0,t.jsx)("span",{className:"font-semibold",children:e}),(0,t.jsx)("span",{className:"flex items-center text-[11px]",children:s.map(s=>(0,t.jsx)("span",{className:"rounded py-[1px]",children:s},`${e}-${s}`))})]},`${e}-${s.join("")}`))})}function B({faceStyle:e,faceStyleToggle:s,testCards:a,testNote:l,testSelectedIds:i,testIncludeCrib:n,testIsDealer:d,showBestSolution:c,bestTestSuggestion:h,userTestChoice:m,handleToggleTestDiscard:x,refreshTestHand:p,onSetTestDealer:f,onSetTestIncludeCrib:g,onToggleShowBest:w,onSendToDiscard:j,testLoading:y}){let N=m?b(m.bestStarters):[],k=h?b(h.bestStarters):[];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-lg shadow-slate-950/50 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-3 md:flex-row md:items-center md:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Test yourself"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"We deal 6 random cards. Pick two to throw to the crib and see how your line compares to the solver."})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 justify-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/10 bg-white/10 text-xs font-semibold text-white",children:[(0,t.jsx)("button",{onClick:()=>f(!0),className:`px-3 py-1.5 transition ${d?"bg-white/20":"hover:bg-white/10"}`,children:"You are dealer"}),(0,t.jsx)("button",{onClick:()=>f(!1),className:`px-3 py-1.5 transition ${!d?"bg-white/20":"hover:bg-white/10"}`,children:"Opponent is dealer"})]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-xs text-slate-200",children:[(0,t.jsx)("input",{type:"checkbox",checked:n,onChange:e=>g(e.target.checked),className:"h-4 w-4 rounded border-white/40 bg-slate-900 text-sky-400"}),"Include crib impact"]}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-3",children:s})]})]}),(0,t.jsx)("div",{className:"mt-4 grid grid-cols-3 gap-2 sm:grid-cols-6",children:a.map(s=>{let a=i.has(s.id);return(0,t.jsxs)("button",{onClick:()=>x(s),className:`group relative overflow-hidden rounded-xl border bg-white/90 p-1 text-left shadow-sm shadow-black/25 transition duration-150 hover:-translate-y-0.5 hover:shadow-lg hover:shadow-black/40 ${a?"border-sky-200 ring-2 ring-sky-300":"border-slate-200/70"}`,children:[(0,t.jsx)("div",{className:"relative aspect-[63/88] w-full overflow-hidden rounded-lg bg-gradient-to-br from-white to-slate-50",children:(0,t.jsx)(r.default,{src:u(s,e),alt:o(s),fill:!0,sizes:"120px",className:"object-contain drop-shadow-sm"})}),(0,t.jsx)("div",{className:"pointer-events-none absolute inset-0 rounded-xl border border-white/50"}),(0,t.jsx)("div",{className:"absolute bottom-2 left-2 flex flex-wrap gap-1 text-[10px] font-semibold text-slate-800 drop-shadow",children:a?(0,t.jsx)("span",{className:"rounded-full bg-sky-500/90 px-2 py-0.5 text-white shadow",children:"Discard"}):(0,t.jsx)("span",{className:"rounded-full bg-slate-100/90 px-2 py-0.5 text-slate-700 shadow",children:"Keep"})})]},s.id)})}),l&&(0,t.jsx)("p",{className:"mt-3 text-sm text-amber-200",children:l})]}),(0,t.jsxs)("section",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Your discard line"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Pick exactly two discards to see the expected value."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:m?m.expectedValue.toFixed(2):"—"}),m&&n&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",m.handAverage.toFixed(2)," / Crib"," ",m.cribAverage.toFixed(2)]})]})]}),!m&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Select two cards to discard."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating expected value..."]})}),m&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(m.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`test-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(m.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`test-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.handAverage.toFixed(2)," pts"]})]}),n&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[m.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters for your keep:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:N.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[D(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`user-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]})]}),(0,t.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl shadow-black/40 backdrop-blur",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Best solution"}),(0,t.jsx)("p",{className:"text-sm text-slate-300",children:"Solver tries every discard; crib math matches your settings."})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-lime-200",children:"Expected value"}),(0,t.jsx)("div",{className:"text-3xl font-black text-lime-100",children:c&&h?h.expectedValue.toFixed(2):"—"}),c&&h&&n&&(0,t.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300",children:["Hand ",h.handAverage.toFixed(2)," / Crib"," ",h.cribAverage.toFixed(2)]})]})]}),!h&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Waiting for a full 6-card deal."}),h&&!c&&(0,t.jsx)("p",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:"Best line is hidden. Select two discards, then tap “Show best”."}),y&&(0,t.jsx)("div",{className:"mt-3 rounded-lg border border-white/10 bg-white/5 px-3 py-2 text-sm text-slate-200",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"h-3 w-3 animate-pulse rounded-full bg-lime-300"}),"Calculating best line..."]})}),h&&c&&(0,t.jsxs)("div",{className:"mt-4 grid gap-3 md:grid-cols-[1.1fr,0.9fr]",children:[(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3",children:[(0,t.jsx)("div",{className:"text-xs uppercase tracking-wide text-emerald-200",children:"Keep"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(h.keep).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-emerald-200/40 bg-emerald-500/10 px-3 py-1 text-sm font-semibold text-emerald-50",children:o(e)},`best-keep-${e.id}`))}),(0,t.jsx)("div",{className:"mt-3 text-xs uppercase tracking-wide text-amber-200",children:"Discard"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:v(h.discards).map(e=>(0,t.jsx)("span",{className:"inline-flex items-center gap-1 rounded-full border border-amber-200/50 bg-amber-500/10 px-3 py-1 text-sm font-semibold text-amber-50",children:o(e)},`best-discard-${e.id}`))})]}),(0,t.jsxs)("div",{className:"rounded-xl border border-white/5 bg-white/5 p-3 text-sm text-slate-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Min hand score (worst starter)"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.minHandScore.toFixed(0)," pts"]})]}),(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Hand average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.handAverage.toFixed(2)," pts"]})]}),n&&(0,t.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,t.jsx)("span",{children:"Crib average"}),(0,t.jsxs)("span",{className:"font-semibold text-lime-100",children:[h.cribAverage.toFixed(2)," pts"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-slate-300",children:"Best starters:"}),(0,t.jsx)("div",{className:"mt-2 flex flex-wrap gap-2",children:k.map(({cards:e,score:s})=>(0,t.jsxs)("span",{className:"inline-flex items-center gap-2 rounded-full border border-sky-200/50 bg-sky-500/15 px-3 py-1 text-xs font-semibold text-sky-50",children:[D(e),(0,t.jsxs)("span",{className:"text-slate-200",children:[s," pts"]})]},`best-starter-group-${s}-${e.map(e=>e.id).join("-")}`))})]})]}),m&&h&&c&&(0,t.jsxs)("div",{className:"mt-4 rounded-xl border border-lime-200/20 bg-lime-500/5 p-3 text-xs text-slate-200",children:[(0,t.jsx)("div",{className:"font-semibold text-white",children:"Comparison"}),(0,t.jsxs)("p",{className:"mt-1",children:["Your line: ",m.expectedValue.toFixed(2)," vs best:"," ",h.expectedValue.toFixed(2)," (",(h.expectedValue-m.expectedValue).toFixed(2)," ","diff)."]})]}),(0,t.jsx)("div",{className:"mt-4 flex justify-end",children:(0,t.jsx)("button",{type:"button",onClick:w,className:`rounded-full border px-3 py-1.5 text-xs font-semibold transition ${c?"border-lime-200/60 bg-lime-500/20 text-lime-50":"border-white/20 bg-white/10 text-white hover:bg-white/20"} ${!h?"cursor-not-allowed opacity-50":""}`,disabled:!h,children:c?"Hide best":"Show best"})})]})]}),(0,t.jsx)("button",{onClick:p,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"Next question"}),(0,t.jsx)("button",{onClick:j,disabled:6!==a.length,className:"inline-flex w-full items-center justify-center rounded-2xl border border-lime-200/60 bg-gradient-to-r from-lime-500/70 to-emerald-500/70 px-4 py-3 text-sm font-semibold text-white shadow-lg shadow-lime-500/30 transition hover:-translate-y-[1px] hover:shadow-emerald-500/40",children:"View in discard tab"})]})}let H="cribbage-active-tab",L="cribbage-is-dealer",q="cribbage-include-crib",U="cribbage-face-style";function V(){let[e,r]=(0,s.useState)("test"),[a,i]=(0,s.useState)([]),[n,o]=(0,s.useState)(null),[c,u]=(0,s.useState)(null),[b,k]=(0,s.useState)([]),[S,_]=(0,s.useState)(null),[C,$]=(0,s.useState)([]),[R,E]=(0,s.useState)(!1),[P,F]=(0,s.useState)(!0),[O,I]=(0,s.useState)(!0),[M,z]=(0,s.useState)([]),[A,D]=(0,s.useState)([]),[V,Y]=(0,s.useState)(null),[J,W]=(0,s.useState)(null),[K,G]=(0,s.useState)(null),[X,Q]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(!1),[et,es]=(0,s.useState)("original"),er=(0,s.useRef)(null),ea=(0,s.useRef)(null),el=(0,s.useRef)(!1),ei=(0,s.useMemo)(()=>new Set([n,...a].filter(Boolean).map(e=>e.id)),[a,n]),en=(0,s.useMemo)(()=>new Set(A.map(e=>e.id)),[A]),ed=(0,s.useMemo)(()=>new Set(b.map(e=>e.id)),[b]),eo=(0,s.useMemo)(()=>l.map(e=>({suit:e,cards:d.filter(t=>t.suit===e)})),[]),ec=(0,s.useMemo)(()=>{let e;return 4===a.length?{total:(e=[h(a),m(a),x(a),4!==a.length?{label:"Flush",points:0,detail:["Need exactly 4 hand cards to check for a flush."]}:a.every(e=>e.suit===a[0].suit)?{label:"Flush",points:4,detail:["4-card flush (no starter) = 4 pts"]}:{label:"Flush",points:0,detail:["No flush (all 4 hand cards must share a suit)."]}]).reduce((e,t)=>e+t.points,0),parts:e}:null},[a]),eu=(0,s.useMemo)(()=>4===a.length&&n?p(a,n):null,[a,n]),eh=4===a.length&&!!n;(0,s.useEffect)(()=>{eh&&!el.current&&(er.current?.scrollIntoView({behavior:"smooth",block:"start"}),el.current=!0),eh||(el.current=!1)},[eh]);let em=(0,s.useCallback)(()=>{let e=[...d];for(let t=e.length-1;t>0;t-=1){let s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e.slice(0,6)},[]),ex=(0,s.useCallback)(()=>{z(v(em())),D([]),Y(null),ee(!1)},[em]),ep=(0,s.useCallback)((e,t)=>{u(null),i(v(e)),o(t),r("count")},[]);(0,s.useEffect)(()=>{let e=localStorage.getItem(H);("count"===e||"discard"===e||"test"===e||"board"===e)&&r(e);let t=localStorage.getItem(L);("true"===t||"false"===t)&&F("true"===t);let s=localStorage.getItem(q);("true"===s||"false"===s)&&I("true"===s);let a=localStorage.getItem(U);("simple"===a||"original"===a)&&es(a)},[]),(0,s.useEffect)(()=>{localStorage.setItem(H,e)},[e]),(0,s.useEffect)(()=>{localStorage.setItem(L,String(P))},[P]),(0,s.useEffect)(()=>{localStorage.setItem(q,String(O))},[O]),(0,s.useEffect)(()=>{localStorage.setItem(U,et)},[et]),(0,s.useEffect)(()=>{if(6!==b.length){$([]),E(!1);return}E(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{$(w(b,P,O)),E(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[b,O,P]),(0,s.useEffect)(()=>{if(6!==M.length||A.length<2){W(null),G(null),Q(!1);return}Q(!0);let e=null,t=requestAnimationFrame(()=>{e=setTimeout(()=>{W(w(M,P,O)[0]??null);let e=M.filter(e=>!A.some(t=>t.id===e.id)),t=d.filter(e=>!M.some(t=>t.id===e.id)),{average:s,best:r}=f(e,t),a=O?g(A,t,P):0,l=O?P?s+a:s-a:s,i=t.length?Math.min(...t.map(t=>p(e,t).total)):0;G({keep:e,discards:A,handAverage:s,cribAverage:a,expectedValue:l,bestStarters:r,minHandScore:i}),Q(!1)},0)});return()=>{cancelAnimationFrame(t),e&&clearTimeout(e)}},[O,P,M,A]),(0,s.useEffect)(()=>{"test"===e&&0===M.length&&ex()},[e,ex,M.length]);let ef=(0,t.jsx)(N,{faceStyle:et,onChange:es});return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-950 via-slate-900 to-slate-950 text-slate-50",children:(0,t.jsxs)("div",{className:"mx-auto max-w-6xl px-6 py-10 space-y-6",children:[(0,t.jsxs)("header",{className:"flex flex-col gap-3 border-b border-white/10 pb-6 sm:flex-row sm:items-end sm:justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-400",children:"Cribbage helper"}),(0,t.jsx)("h1",{className:"text-4xl font-bold text-white sm:text-5xl",children:"Play faster, score smarter"}),(0,t.jsx)("p",{className:"mt-2 max-w-3xl text-sm text-slate-300",children:"Flip between counting a finished hand or plotting the best discard. Every result shows the math so you can trust the suggestion."})]}),(0,t.jsxs)("div",{className:"flex flex-col items-start gap-3 sm:items-end",children:[(0,t.jsxs)("div",{className:"flex overflow-hidden rounded-full border border-white/15 bg-white/10 text-xs font-semibold text-white shadow-lg shadow-slate-950/30",children:[(0,t.jsx)("button",{onClick:()=>r("count"),className:`px-3 py-2 transition ${"count"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Count a hand"}),(0,t.jsx)("button",{onClick:()=>r("discard"),className:`px-3 py-2 transition ${"discard"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Discard to crib"}),(0,t.jsx)("button",{onClick:()=>{r("test"),M.length||ex()},className:`px-3 py-2 transition ${"test"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Test yourself"}),(0,t.jsx)("button",{onClick:()=>r("board"),className:`px-3 py-2 transition ${"board"===e?"bg-white/20":"hover:bg-white/10"}`,children:"Track a game"})]}),(0,t.jsx)("button",{onClick:"count"===e?()=>{i([]),o(null),u(null)}:"discard"===e?()=>{k([]),_(null),E(!1)}:"test"===e?ex:()=>ea.current?.(),className:"inline-flex items-center justify-center rounded-full border border-white/15 bg-white/10 px-4 py-2 text-sm font-semibold text-white shadow-lg shadow-slate-950/30 transition hover:-translate-y-[1px] hover:bg-white/20 hover:shadow-slate-900/50",children:"board"===e?"Reset game":"Reset selection"})]})]}),"count"===e&&(0,t.jsx)(j,{cardsBySuit:eo,hand:a,starter:n,note:c,faceStyle:et,faceStyleToggle:ef,selectedIds:ei,handleToggleCountCard:e=>{if(u(null),ei.has(e.id)){i(t=>t.filter(t=>t.id!==e.id)),o(t=>t?.id===e.id?null:t);return}a.length<4?i(t=>[...t,e]):n?u("You already picked 4 hand cards and a starter. Remove one to change."):o(e)},handOnlyBreakdown:ec,breakdown:eu,slotsFilled:eh,picksRef:er}),"discard"===e&&(0,t.jsx)(y,{cardsBySuit:eo,discardPick:b,discardNote:S,discardSelectedIds:ed,handleToggleDiscardCard:e=>{(_(null),ed.has(e.id))?k(t=>{let s=t.filter(t=>t.id!==e.id);return E(!1),s}):b.length<6?k(t=>{let s=[...t,e];return 6===s.length&&E(!0),s}):_("You already picked 6 cards. Remove one to change the set.")},faceStyle:et,faceStyleToggle:ef,isDealer:P,includeCrib:O,onDealerChange:F,onIncludeCribChange:I,discardSuggestions:C,discardLoading:R,onStarterPick:ep}),"test"===e&&(0,t.jsx)(B,{faceStyle:et,faceStyleToggle:ef,testCards:M,testDiscards:A,testNote:V,testSelectedIds:en,testIncludeCrib:O,testIsDealer:P,showBestSolution:Z,bestTestSuggestion:J,userTestChoice:K,handleToggleTestDiscard:e=>{if(Y(null),A.some(t=>t.id===e.id)){let t=A.filter(t=>t.id!==e.id);D(t),2!==t.length&&ee(!1);return}if(A.length<2){let t=[...A,e];D(t),2===t.length?(Q(!0),ee(!0)):ee(!1);return}Y("You already picked 2 discards. Tap again to deselect.")},refreshTestHand:ex,onSetTestDealer:F,onSetTestIncludeCrib:I,onToggleShowBest:()=>J&&ee(e=>!e),onSendToDiscard:()=>{6===M.length&&(k(v(M)),_(null),E(!0),r("discard"))},testLoading:X}),"board"===e&&(0,t.jsx)(T,{onRegisterReset:e=>{ea.current=e}})]})})}e.s(["default",()=>V],52683)}]);